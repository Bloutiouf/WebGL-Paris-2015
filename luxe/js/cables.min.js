function generateUUID(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)});return e}function ajaxRequest(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(t){e(t.target.response)},i.send()}function Timer(){function t(){return l=(Date.now()-r)/1e3,l+s}function e(){if(!g)for(var t in u)u[t]()}function i(){if(!g)for(var t in c)c[t]()}var n=this,r=Date.now(),s=0,o=0,l=0,a=!0,h=0,g=!1;this.overwriteTime=-1,this.setDelay=function(t){h=t,i()},this.isPlaying=function(){return!a},this.update=function(){return a?void 0:o=t()},this.getTime=function(){return this.overwriteTime>=0?this.overwriteTime-h:o-h},this.togglePlay=function(){a?n.play():n.pause()},this.setTime=function(t){0>t&&(t=0),r=Date.now(),s=t,o=t,i()},this.setOffset=function(t){0>o+t?(r=Date.now(),s=0,o=0):(s+=t,o=l+s),i()},this.play=function(){r=Date.now(),a=!1,e()},this.pause=function(){s=o,a=!0,e()};var u=[],c=[];this.pauseEvents=function(t){g=t},this.onPlayPause=function(t){t&&"function"==typeof t&&u.push(t)},this.onTimeChange=function(t){t&&"function"==typeof t&&c.push(t)}}function generateUUID(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)});return e}function ajaxRequest(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(t){e(t.target.response)},i.send()}String.prototype.endl=function(){return this+"\n"},CGL=CGL||{},CGL.numMaxLoadingAssets=0,CGL.numLoadingAssets=0,CGL.finishedLoading=function(){return 0!==CGL.numLoadingAssets},CGL.incrementLoadingAssets=function(){CGL.numLoadingAssets++,CGL.numMaxLoadingAssets=Math.max(CGL.numLoadingAssets,CGL.numMaxLoadingAssets)},CGL.decrementLoadingAssets=function(){CGL.numLoadingAssets--},CGL.getLoadingStatus=function(){return(CGL.numMaxLoadingAssets-CGL.numLoadingAssets)/CGL.numMaxLoadingAssets};var CGL=CGL||{};CGL.DEG2RAD=3.14159/180,CGL.Mesh=function(t){var e=-1,i=-1,n=cgl.gl.createBuffer(),r=cgl.gl.createBuffer();this.setGeom=function(t){cgl.gl.bindBuffer(cgl.gl.ARRAY_BUFFER,n),cgl.gl.bufferData(cgl.gl.ARRAY_BUFFER,new Float32Array(t.vertices),cgl.gl.STATIC_DRAW),n.itemSize=3,n.numItems=t.vertices.length/3,cgl.gl.bindBuffer(cgl.gl.ELEMENT_ARRAY_BUFFER,r),cgl.gl.bufferData(cgl.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.verticesIndices),cgl.gl.STATIC_DRAW),r.itemSize=1,r.numItems=t.verticesIndices.length,t.vertexNormals.length>0&&(-1==i&&(i=cgl.gl.createBuffer()),cgl.gl.bindBuffer(cgl.gl.ARRAY_BUFFER,i),cgl.gl.bufferData(cgl.gl.ARRAY_BUFFER,new Float32Array(t.vertexNormals),cgl.gl.STATIC_DRAW),i.itemSize=3,i.numItems=t.vertexNormals.length/i.itemSize),t.texCoords.length>0&&(-1==e&&(e=cgl.gl.createBuffer()),cgl.gl.bindBuffer(cgl.gl.ARRAY_BUFFER,e),cgl.gl.bufferData(cgl.gl.ARRAY_BUFFER,new Float32Array(t.texCoords),cgl.gl.STATIC_DRAW),e.itemSize=2,e.numItems=t.texCoords.length/e.itemSize)},this.setGeom(t),this.render=function(t){if(t){t.bind(),cgl.gl.enableVertexAttribArray(t.getAttrVertexPos()),-1!=i?cgl.gl.enableVertexAttribArray(t.getAttrVertexNormals()):cgl.gl.disableVertexAttribArray(t.getAttrVertexNormals()),-1!=e&&cgl.gl.enableVertexAttribArray(t.getAttrTexCoords()),cgl.gl.bindBuffer(cgl.gl.ARRAY_BUFFER,n),cgl.gl.vertexAttribPointer(t.getAttrVertexPos(),n.itemSize,cgl.gl.FLOAT,!1,0,0),-1!=i&&(cgl.gl.bindBuffer(cgl.gl.ARRAY_BUFFER,i),cgl.gl.vertexAttribPointer(t.getAttrVertexNormals(),i.itemSize,cgl.gl.FLOAT,!1,0,0)),-1!=e&&(cgl.gl.bindBuffer(cgl.gl.ARRAY_BUFFER,e),cgl.gl.vertexAttribPointer(t.getAttrTexCoords(),e.itemSize,cgl.gl.FLOAT,!1,0,0)),cgl.gl.bindBuffer(cgl.gl.ELEMENT_ARRAY_BUFFER,r);var s=cgl.gl.TRIANGLES;cgl.wireframe?s=cgl.gl.LINES:cgl.points&&(s=cgl.gl.POINTS),cgl.gl.drawElements(s,r.numItems,cgl.gl.UNSIGNED_SHORT,0)}}},CGL.Geometry=function(){this.faceVertCount=3,this.vertices=[],this.verticesIndices=[],this.texCoords=[],this.texCoordsIndices=[],this.vertexNormals=[],this.clear=function(){this.vertices.length=0,this.verticesIndices.length=0,this.texCoords.length=0,this.texCoordsIndices.length=0,this.vertexNormals.length=0},this.addFace=function(t,e,i){for(var n=[-1,-1,-1],r=0;r<this.vertices;r+=3)this.vertices[r+0]==t[0]&&this.vertices[r+1]==t[1]&&this.vertices[r+2]==t[2]&&(n[0]=r/3),this.vertices[r+0]==e[0]&&this.vertices[r+1]==e[1]&&this.vertices[r+2]==e[2]&&(n[1]=r/3),this.vertices[r+0]==i[0]&&this.vertices[r+1]==i[1]&&this.vertices[r+2]==i[2]&&(n[2]=r/3);-1==n[0]&&(this.vertices.push(t[0],t[1],t[2]),n[0]=(this.vertices.length-1)/3),-1==n[1]&&(this.vertices.push(e[0],e[1],e[2]),n[1]=(this.vertices.length-1)/3),-1==n[2]&&(this.vertices.push(i[0],i[1],i[2]),n[2]=(this.vertices.length-1)/3),this.verticesIndices.push(parseInt(n[0],10)),this.verticesIndices.push(parseInt(n[1],10)),this.verticesIndices.push(parseInt(n[2],10)),faceVertCount=this.verticesIndices.length}},parseOBJ=function(t){_readline=function(t,e){for(var i="";10!=t[e];)i+=String.fromCharCode(t[e++]);return i};var e=new CGL.Geometry;e.groups={},e.vertexNormals=[],e.vertexNormalIndices=[];for(var i={from:0,to:0},n=0,r=new Uint8Array(t),s=0,o=0,l=0;n<r.length;){var a=_readline(r,n);n+=a.length+1,a=a.replace(/ +(?= )/g,""),a=a.replace(/(^\s+|\s+$)/g,"");var h=a.split(" ");if("g"==h[0]&&(i.to=e.verticesIndices.length,e.groups[h[1]]||(e.groups[h[1]]={from:e.verticesIndices.length,to:0}),i=e.groups[h[1]]),"v"==h[0]&&(s=parseFloat(h[1]),o=parseFloat(h[2]),l=parseFloat(h[3]),e.vertices.push(s,o,l)),"vt"==h[0]&&(s=parseFloat(h[1]),o=1-parseFloat(h[2]),e.texCoords.push(s,o)),"vn"==h[0]&&(s=parseFloat(h[1]),o=parseFloat(h[2]),l=parseFloat(h[3]),e.vertexNormals.push(s,o,l)),"f"==h[0]){var g=h[1].split("/"),u=h[2].split("/"),c=h[3].split("/"),f=parseInt(g[0])-1,p=parseInt(u[0])-1,d=parseInt(c[0])-1,m=parseInt(g[1])-1,T=parseInt(u[1])-1,v=parseInt(c[1])-1,E=parseInt(g[2])-1,I=parseInt(u[2])-1,L=parseInt(c[2])-1,A=e.vertices.length/3,x=e.texCoords.length/2,_=e.vertexNormals.length/3;if(0>f&&(f=A+f+1),0>p&&(p=A+p+1),0>d&&(d=A+d+1),0>m&&(m=x+m+1),0>T&&(T=x+T+1),0>v&&(v=x+v+1),0>E&&(E=_+E+1),0>I&&(I=_+I+1),0>L&&(L=_+L+1),e.verticesIndices.push(f,p,d),e.texCoordsIndices.push(m,T,v),e.vertexNormalIndices.push(E,I,L),5==h.length){var R=h[4].split("/"),S=parseInt(R[0])-1,C=parseInt(R[1])-1,O=parseInt(R[2])-1;0>S&&(S=A+S+1),0>C&&(C=x+C+1),0>O&&(O=_+O+1),e.verticesIndices.push(f,d,S),e.texCoordsIndices.push(m,v,C),e.vertexNormalIndices.push(E,L,O)}}}return i.to=e.verticesIndices.length,e};var CGL=CGL||{};CGL.Uniform=function(t,e,i,n){var r=this,s=-1,o=i,l=e,a=0,h=t;this.needsUpdate=!0,h.addUniform(this),this.getType=function(){return l},this.getName=function(){return o},this.resetLoc=function(){s=-1},this.updateValueF=function(){-1==s&&(s=cgl.gl.getUniformLocation(h.getProgram(),o)),cgl.gl.uniform1f(s,a)},this.setValueF=function(t){t!=a&&(r.needsUpdate=!0,a=t)},this.updateValue4F=function(){-1==s&&(s=cgl.gl.getUniformLocation(h.getProgram(),o)),cgl.gl.uniform4f(s,a[0],a[1],a[2],a[3])},this.setValue4F=function(t){r.needsUpdate=!0,a=t},this.updateValueT=function(){-1==s&&(s=cgl.gl.getUniformLocation(h.getProgram(),o),-1==s&&console.log("texture loc unknown!!")),cgl.gl.uniform1i(s,a)},this.setValueT=function(t){r.needsUpdate=!0,a=t},"f"==l&&(this.setValue=this.setValueF,this.updateValue=this.updateValueF),"4f"==l&&(this.setValue=this.setValue4F,this.updateValue=this.updateValue4F),"t"==l&&(this.setValue=this.setValueT,this.updateValue=this.updateValueT),this.setValue(n)},CGL.Shader=function(){var t=this,e=!1,i=[],n=[],r=!0;this.define=function(t,e){e||(e="");for(var i=0;i<n.length;i++)if(n[i][0]==t)return n[i][1]=e,void(r=!0);n.push([t,e]),r=!0},this.removeDefine=function(t,e){for(var i=0;i<n.length;i++)if(n[i][0]==t)return n.splice(i,1),void(r=!0)},this.removeUniform=function(t){for(var e=0;e<i.length;e++)i[e].getName()==t&&i.splice(e,1);r=!0},this.addUniform=function(t){i.push(t),r=!0},this.getDefaultVertexShader=function(){return"".endl()+"attribute vec3 vPosition;".endl()+"attribute vec2 attrTexCoord;".endl()+"attribute vec3 attrVertNormal;".endl()+"varying vec2 texCoord;".endl()+"varying vec3 norm;".endl()+"uniform mat4 projMatrix;".endl()+"uniform mat4 mvMatrix;".endl()+"uniform mat4 normalMatrix;".endl()+"void main()".endl()+"{".endl()+"   texCoord=attrTexCoord;".endl()+"   norm=attrVertNormal;".endl()+"   gl_Position = projMatrix * mvMatrix * vec4(vPosition,  1.0);".endl()+"}"},this.getDefaultFragmentShader=function(){return"".endl()+"precision mediump float;".endl()+"varying vec3 norm;".endl()+"void main()".endl()+"{".endl()+"   gl_FragColor = vec4(0.5,0.5,0.5,1.0);".endl()+"}"},this.getErrorFragmentShader=function(){return"".endl()+"precision mediump float;".endl()+"varying vec3 norm;".endl()+"void main()".endl()+"{".endl()+"   gl_FragColor = vec4(1.0,0.0,0.0,1.0);".endl()+"}"},this.srcVert=this.getDefaultVertexShader(),this.srcFrag=this.getDefaultFragmentShader(),this.setSource=function(t,e){this.srcVert=t,this.srcFrag=e};var s=-1,o=-1,l=-1,a=-1,h=-1,g=-1;this.getAttrVertexNormals=function(){return h},this.getAttrTexCoords=function(){return a},this.getAttrVertexPos=function(){return g},this.hasTextureUniforms=function(){for(var t=0;t<i.length;t++)if("t"==i[t].getType())return!0;return!1},this.compile=function(){var s="",l=0;for(l=0;l<n.length;l++)s+="#define "+n[l][0]+" "+n[l][1]+"".endl();t.hasTextureUniforms()&&(s+="#define HAS_TEXTURES".endl());var a=s+t.srcVert,h=s+t.srcFrag;if(e){e=createProgram(a,h,e),o=-1;for(var l=0;l<i.length;l++)i[l].resetLoc()}else e=createProgram(a,h,e);r=!1},this.bind=function(){(!e||r)&&t.compile(),-1==o&&(h=cgl.gl.getAttribLocation(e,"attrVertNormal"),a=cgl.gl.getAttribLocation(e,"attrTexCoord"),g=cgl.gl.getAttribLocation(e,"vPosition"),s=cgl.gl.getUniformLocation(e,"projMatrix"),o=cgl.gl.getUniformLocation(e,"mvMatrix"),l=cgl.gl.getUniformLocation(e,"normalMatrix")),cgl.gl.useProgram(e);for(var n=0;n<i.length;n++)i[n].needsUpdate&&i[n].updateValue();cgl.gl.uniformMatrix4fv(s,!1,cgl.pMatrix),cgl.gl.uniformMatrix4fv(o,!1,cgl.mvMatrix);var u=mat4.create();mat4.invert(u,cgl.mvMatrix),mat4.transpose(u,u),cgl.gl.uniformMatrix4fv(l,!1,u)},this.getProgram=function(){return e},createShader=function(e,i,n){function r(t){var e=[],i=t.split("\n");for(var n in i){var r=i[n].split(":");parseInt(r[2],10)&&e.push(parseInt(r[2],10))}return e}var s=n||cgl.gl.createShader(i);if(cgl.gl.shaderSource(s,e),cgl.gl.compileShader(s),!cgl.gl.getShaderParameter(s,cgl.gl.COMPILE_STATUS)){console.log("compile status: "),i==cgl.gl.VERTEX_SHADER&&console.log("VERTEX_SHADER"),i==cgl.gl.FRAGMENT_SHADER&&console.log("FRAGMENT_SHADER"),console.warn(cgl.gl.getShaderInfoLog(s));var o=cgl.gl.getShaderInfoLog(s),l=r(o),a='<div class="shaderErrorCode">',h=e.match(/^.*((\r\n|\n|\r)|$)/gm);for(var g in h){var u=parseInt(g,10)+1,c=u+": "+h[g];console.log(c);var f=!1;for(var p in l)l[p]==u&&(f=!0);f&&(a+='<span class="error">'),a+=c,f&&(a+="</span>")}console.warn(o),o=o.replace(/\n/g,"<br/>"),a=o+"<br/>"+a+"<br/><br/>",CABLES.UI.MODAL.showError("shader error",a),a+="</div>",t.setSource(t.getDefaultVertexShader(),t.getErrorFragmentShader())}return s},linkProgram=function(e){cgl.gl.linkProgram(e),cgl.gl.getProgramParameter(e,cgl.gl.LINK_STATUS)||t.setSource(t.getDefaultVertexShader(),t.getErrorFragmentShader())},createProgram=function(e,i){var n=cgl.gl.createProgram();return t.vshader=createShader(e,cgl.gl.VERTEX_SHADER),t.fshader=createShader(i,cgl.gl.FRAGMENT_SHADER),cgl.gl.attachShader(n,t.vshader),cgl.gl.attachShader(n,t.fshader),linkProgram(n),n}};var CGL=CGL||{};CGL.State=function(){var t=this,e=[],i=[],n=[];this.pMatrix=mat4.create(),this.mvMatrix=mat4.create(),this.canvas=null,mat4.identity(t.mvMatrix);var r=new CGL.Shader,s=r,o=document.getElementById("glcanvas");this.gl=o.getContext("experimental-webgl",{preserveDrawingBuffer:!0,antialias:!0}),this.canvasWidth=640,this.canvasHeight=360,this.wireframe=!1,this.points=!1,this.doScreenshot=!1,this.screenShotDataURL=null;var l=[0,0,0,0];this.getViewPort=function(){return l},this.resetViewPort=function(){cgl.gl.viewport(l[0],l[1],l[2],l[3])},this.setViewPort=function(t,e,i,n){l[0]=parseInt(t,10),l[1]=parseInt(e,10),l[2]=parseInt(i,10),l[3]=parseInt(n,10),cgl.gl.viewport(l[0],l[1],l[2],l[3])},this.beginFrame=function(){t.setShader(r)},this.endFrame=function(){t.setPreviousShader(),e.length>0&&console.warn("mvmatrix stack length !=0 at end of rendering..."),i.length>0&&console.warn("pmatrix stack length !=0 at end of rendering..."),n.length>0&&console.warn("shaderStack length !=0 at end of rendering..."),e.length=0,i.length=0,n.length=0,this.doScreenshot&&(console.log("do screenshot"),this.doScreenshot=!1,this.screenShotDataURL=document.getElementById("glcanvas").toDataURL("image/png"))},this.getShader=function(){return s},this.setShader=function(t){n.push(t),s=t},this.setPreviousShader=function(){if(0===n.length)throw"Invalid movelview popMatrix!";n.pop(),s=n[n.length-1]},this.pushMvMatrix=function(){var i=mat4.create();mat4.copy(i,t.mvMatrix),e.push(i)},this.popMvMatrix=function(){if(0===e.length)throw"Invalid movelview popMatrix!";t.mvMatrix=e.pop()},this.pushPMatrix=function(){var e=mat4.create();mat4.copy(e,t.pMatrix),i.push(e)},this.popPMatrix=function(){if(0===i.length)throw"Invalid projection popMatrix!";t.pMatrix=i.pop()}},cgl=new CGL.State;var CGL=CGL||{};CGL.Texture=function(t){function e(t){return 1==t||2==t||4==t||8==t||16==t||32==t||64==t||128==t||256==t||512==t||1024==t||2048==t||4096==t||8192==t||16384==t}function i(){e(n.width)&&e(n.height)?(n.filter==CGL.Texture.FILTER_NEAREST&&(cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_MAG_FILTER,cgl.gl.NEAREST),cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_MIN_FILTER,cgl.gl.NEAREST)),n.filter==CGL.Texture.FILTER_LINEAR&&(cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_MIN_FILTER,cgl.gl.LINEAR),cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_MAG_FILTER,cgl.gl.LINEAR)),n.filter==CGL.Texture.FILTER_MIPMAP&&(cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_MAG_FILTER,cgl.gl.LINEAR),cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_MIN_FILTER,cgl.gl.NEAREST_MIPMAP_LINEAR))):(cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_WRAP_S,cgl.gl.CLAMP_TO_EDGE),cgl.gl.texParameteri(cgl.gl.TEXTURE_2D,cgl.gl.TEXTURE_WRAP_T,cgl.gl.CLAMP_TO_EDGE))}var n=this;this.tex=cgl.gl.createTexture(),this.width=0,this.height=0,this.flip=!0,this.filter=CGL.Texture.FILTER_NEAREST;var r=!1;t&&t.isDepthTexture&&(r=t.isDepthTexture),this.setSize=function(t,e){n.width=t,n.height=e,cgl.gl.bindTexture(cgl.gl.TEXTURE_2D,n.tex);var s=null;i(),r?cgl.gl.texImage2D(cgl.gl.TEXTURE_2D,0,cgl.gl.DEPTH_COMPONENT,t,e,0,cgl.gl.DEPTH_COMPONENT,cgl.gl.UNSIGNED_SHORT,null):cgl.gl.texImage2D(cgl.gl.TEXTURE_2D,0,cgl.gl.RGBA,t,e,0,cgl.gl.RGBA,cgl.gl.UNSIGNED_BYTE,s),cgl.gl.bindTexture(cgl.gl.TEXTURE_2D,null)},this.initTexture=function(t){n.width=t.width,n.height=t.height,cgl.gl.bindTexture(cgl.gl.TEXTURE_2D,n.tex),n.flip&&cgl.gl.pixelStorei(cgl.gl.UNPACK_FLIP_Y_WEBGL,!0),cgl.gl.texImage2D(cgl.gl.TEXTURE_2D,0,cgl.gl.RGBA,cgl.gl.RGBA,cgl.gl.UNSIGNED_BYTE,n.image),i(),e(n.width)&&e(n.height)&&n.filter==CGL.Texture.FILTER_MIPMAP&&cgl.gl.generateMipmap(cgl.gl.TEXTURE_2D),cgl.gl.bindTexture(cgl.gl.TEXTURE_2D,null)},this.setSize(8,8),this.preview=function(){CGL.Texture.previewTexture=n}},CGL.Texture.load=function(t,e,i){CGL.incrementLoadingAssets();var n=new CGL.Texture;return n.image=new Image,i&&i.hasOwnProperty("filter")&&(n.filter=i.filter),n.image.onload=function(){n.initTexture(n.image,i),e&&e(),CGL.decrementLoadingAssets()},n.image.src=t,n},CGL.Texture.fromImage=function(t){var e=new CGL.Texture;return e.flip=!0,e.image=t,e.initTexture(t),e},CGL.Texture.FILTER_NEAREST=0,CGL.Texture.FILTER_LINEAR=1,CGL.Texture.FILTER_MIPMAP=2,CGL.Texture.previewTexture=null,CGL.Texture.texturePreviewer=null,CGL.Texture.texturePreview=function(){var t=2,e=new CGL.Geometry;e.vertices=[t/2,t/2,0,-t/2,t/2,0,t/2,-t/2,0,-t/2,-t/2,0],e.texCoords=[1,1,0,1,1,0,0,0],e.verticesIndices=[0,1,2,3,1,2];var i=new CGL.Mesh(e),n="".endl()+"precision highp float;".endl()+"varying vec2 texCoord;".endl()+"uniform sampler2D tex;".endl()+"uniform float time;".endl()+"".endl()+"void main()".endl()+"{".endl()+"   vec4 col;".endl()+"bool isEven = mod(time+texCoord.y+texCoord.x,0.2)>0.1;".endl()+"vec4 col1 = vec4(0.2,0.2,0.2,1.0);".endl()+"vec4 col2 = vec4(0.5,0.5,0.5,1.0);".endl()+"col = (isEven)? col1:col2;".endl()+"vec4 colTex = texture2D(tex,texCoord);;".endl()+"col = mix(col,colTex,colTex.a);".endl()+"   gl_FragColor = col;".endl()+"}",r=new CGL.Shader;r.setSource(r.getDefaultVertexShader(),n);var s=new CGL.Uniform(r,"f","time",0),o=(new CGL.Uniform(r,"t","tex",0),Date.now()/1e3);this.render=function(t){console.log("previewing ",t.width,t.height),cgl.gl.clearColor(0,0,0,0),cgl.gl.clear(cgl.gl.COLOR_BUFFER_BIT|cgl.gl.DEPTH_BUFFER_BIT),s.setValue(.1*(Date.now()/1e3-o)),cgl.setShader(r),t&&(cgl.gl.activeTexture(cgl.gl.TEXTURE0),cgl.gl.bindTexture(cgl.gl.TEXTURE_2D,t.tex)),i.render(cgl.getShader()),cgl.setPreviousShader()}};var CGL=CGL||{};CGL.TextureEffect=function(){var t=this,e=new CGL.Geometry;e.vertices=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],e.texCoords=[1,1,0,1,1,0,0,0],e.verticesIndices=[0,1,2,3,1,2];var i=new CGL.Mesh(e),n=null,r=new CGL.Texture,s=cgl.gl.createFramebuffer(),o=cgl.gl.createRenderbuffer(),l=!1;this.startEffect=function(){l=!1},this.setSourceTexture=function(t){null===t?(n=new CGL.Texture,n.setSize(16,16)):n=t,r.setSize(n.width,n.height),cgl.gl.bindFramebuffer(cgl.gl.FRAMEBUFFER,s),cgl.gl.bindRenderbuffer(cgl.gl.RENDERBUFFER,o),cgl.gl.renderbufferStorage(cgl.gl.RENDERBUFFER,cgl.gl.DEPTH_COMPONENT16,n.width,n.height),cgl.gl.framebufferTexture2D(cgl.gl.FRAMEBUFFER,cgl.gl.COLOR_ATTACHMENT0,cgl.gl.TEXTURE_2D,r.tex,0),cgl.gl.framebufferRenderbuffer(cgl.gl.FRAMEBUFFER,cgl.gl.DEPTH_ATTACHMENT,cgl.gl.RENDERBUFFER,o),cgl.gl.bindTexture(cgl.gl.TEXTURE_2D,null),cgl.gl.bindRenderbuffer(cgl.gl.RENDERBUFFER,null),cgl.gl.bindFramebuffer(cgl.gl.FRAMEBUFFER,null)},this.getCurrentTargetTexture=function(){return l?n:r},this.getCurrentSourceTexture=function(){return l?r:n},this.bind=function(){return null===n?void console.log("no base texture set!"):(cgl.pushMvMatrix(),cgl.gl.bindFramebuffer(cgl.gl.FRAMEBUFFER,s),cgl.gl.framebufferTexture2D(cgl.gl.FRAMEBUFFER,cgl.gl.COLOR_ATTACHMENT0,cgl.gl.TEXTURE_2D,t.getCurrentTargetTexture().tex,0),cgl.pushPMatrix(),cgl.gl.viewport(0,0,t.getCurrentTargetTexture().width,t.getCurrentTargetTexture().height),mat4.perspective(cgl.pMatrix,45,t.getCurrentTargetTexture().width/t.getCurrentTargetTexture().height,.01,1100),cgl.pushPMatrix(),mat4.identity(cgl.pMatrix),cgl.pushMvMatrix(),mat4.identity(cgl.mvMatrix),cgl.gl.clearColor(0,0,0,0),void cgl.gl.clear(cgl.gl.COLOR_BUFFER_BIT|cgl.gl.DEPTH_BUFFER_BIT))},this.finish=function(){return null===n?void console.log("no base texture set!"):(i.render(cgl.getShader()),cgl.popPMatrix(),cgl.popMvMatrix(),cgl.gl.bindFramebuffer(cgl.gl.FRAMEBUFFER,null),cgl.popPMatrix(),cgl.resetViewPort(),cgl.popMvMatrix(),void(l=!l))}};var PORT_DIR_IN=0,PORT_DIR_OUT=1,OP_PORT_TYPE_VALUE=0,OP_PORT_TYPE_FUNCTION=1,OP_PORT_TYPE_OBJECT=2,OP_PORT_TYPE_TEXTURE=2,OP_PORT_TYPE_ARRAY=3,OP_PORT_TYPE_DYNAMIC=4,Ops={},Op=function(){this.objName="",this.portsOut=[],this.portsIn=[],this.posts=[],this.uiAttribs={},this.enabled=!0,this.patch=null,this.name="unknown",this.id=generateUUID(),this.onAddPort=null,this.onCreate=null,this.onResize=null,this.onLoaded=null,this.uiAttr=function(t){this.uiAttribs||(this.uiAttribs={});for(var e in t)this.uiAttribs[e]=t[e]},this.getName=function(){return this.name},this.addOutPort=function(t){return t.direction=PORT_DIR_OUT,t.parent=this,this.portsOut.push(t),this.onAddPort&&this.onAddPort(t),t},this.hasPort=function(t){for(var e in this.portsIn)if(this.portsIn[e].getName()==t)return!0;return!1},this.addInPort=function(t){return t.direction=PORT_DIR_IN,t.parent=this,this.portsIn.push(t),this.onAddPort&&this.onAddPort(t),t},this.printInfo=function(){for(var t=0;t<this.portsIn.length;t++)console.log("in: "+this.portsIn[t].getName());for(var e in this.portsOut)console.log("out: "+this.portsOut[e].getName())},this.removeLinks=function(){for(var t=0;t<this.portsIn.length;t++)this.portsIn[t].removeLinks();for(var e in this.portsOut)this.portsOut[e].removeLinks()},this.findFittingPort=function(t){for(var e in this.portsOut)if(Link.canLink(t,this.portsOut[e]))return this.portsOut[e];for(var i in this.portsIn)if(Link.canLink(t,this.portsIn[i]))return this.portsIn[i]},this.getSerialized=function(){var t={};t.name=this.getName(),t.objName=this.objName,t.id=this.id,t.uiAttribs=this.uiAttribs,t.portsIn=[],t.portsOut=[];for(var e=0;e<this.portsIn.length;e++)this.portsIn[e].type!=OP_PORT_TYPE_DYNAMIC&&t.portsIn.push(this.portsIn[e].getSerialized());for(var i in this.portsOut)this.portsOut[i].type!=OP_PORT_TYPE_DYNAMIC&&t.portsOut.push(this.portsOut[i].getSerialized());return t},this.getPort=function(t){for(var e in this.portsIn)if(this.portsIn[e].getName()==t)return this.portsIn[e];for(var i in this.portsOut)if(this.portsOut[i].getName()==t)return this.portsOut[i]},this.updateAnims=function(){for(var t=0;t<this.portsIn.length;t++)this.portsIn[t].updateAnim()}},Port=function(t,e,i,n){var r=this;this.direction=PORT_DIR_IN,this.id=generateUUID(),this.parent=t,this.links=[],this.value=0,this.name=e,this.type=i||OP_PORT_TYPE_VALUE,this.uiAttribs=n||{};var s=null;this.anim=null;var o=!1,l=-5711;this.onLink=!1,this.showPreview=!1,this.doShowPreview=function(t){t!=r.showPreview&&(r.showPreview=t,r.onPreviewChanged())},this.onPreviewChanged=function(){},this.shouldLink=function(){return!0},this.__defineGetter__("val",function(){return this.value}),this.__defineSetter__("val",function(t){this.setValue(t)}),this.getType=function(){return this.type},this.isLinked=function(){return this.links.length>0},this.onValueChanged=null,this.onTriggered=function(){},this._onTriggered=function(){t.updateAnims(),t.enabled&&r.onTriggered()},this.setValue=function(e){if(t.enabled&&(e!=this.value||this.type==OP_PORT_TYPE_TEXTURE)&&(o?r.anim.setValue(t.patch.timer.getTime(),e):(this.value=e,this.onValueChanged&&this.onValueChanged()),0!==this.links.length))for(var i=0;i<this.links.length;++i)this.links[i].setValue()},this.updateAnim=function(){o&&(this.value=r.anim.getValue(t.patch.timer.getTime()),l!=this.value&&(l=this.value,this.onValueChanged&&this.onValueChanged()),l=this.value)},this.isAnimated=function(){return o},this.onAnimToggle=function(){},this._onAnimToggle=function(){this.onAnimToggle()},this.setAnimated=function(t){o!=t&&(o=t,o&&!r.anim&&(r.anim=new CABLES.TL.Anim),this._onAnimToggle())},this.toggleAnim=function(t){o=!o,o&&!r.anim&&(r.anim=new CABLES.TL.Anim),r.setAnimated(o),this._onAnimToggle()},this.getName=function(){return this.name},this.addLink=function(t){s=r.value,this.links.push(t)},this.removeLinkTo=function(t){for(var e in this.links)(this.links[e].portIn==t||this.links[e].portOut==t)&&this.links[e].remove()},this.isLinkedTo=function(t){for(var e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return!0;return!1},this.trigger=function(){if(t.enabled&&0!==this.links.length)for(var e=0;e<this.links.length;++e)this.links[e].portIn._onTriggered()},this.call=function(){console.log("call deprecated - use trigger() "),this.trigger()},this.execute=function(){console.log("### execute port: "+this.getName(),this.goals.length)},this.getTypeString=function(){return this.type==OP_PORT_TYPE_VALUE?"value":this.type==OP_PORT_TYPE_FUNCTION?"function":this.type==OP_PORT_TYPE_TEXTURE?"texture":void 0},this.getSerialized=function(){var t={};if(t.name=this.getName(),t.value=this.value,o&&(t.animated=!0),this.anim&&(t.anim=this.anim.getSerialized()),this.direction==PORT_DIR_IN&&this.links.length>0){t.links=[];for(var e in this.links)t.links.push(this.links[e].getSerialized())}return t},this.removeLinks=function(){for(;this.links.length>0;)this.links[0].remove()},this.removeLink=function(t){for(var e in this.links)this.links[e]==t&&this.links.splice(e,1);r.setValue(s)}},Link=function(t){this.portIn=null,this.portOut=null,this.scene=t,this.setValue=function(t){this.portIn.val=t},this.setValue=function(){this.portIn.val!=this.portOut.val&&(this.portIn.val=this.portOut.val)},this.getOtherPort=function(t){return t==this.portIn?this.portOut:this.portIn},this.remove=function(){this.portIn.removeLink(this),this.portOut.removeLink(this),this.scene.onUnLink(this.portIn,this.portOut),this.portIn=null,this.portOut=null,this.scene=null},this.link=function(t,e){return Link.canLink(t,e)?(t.direction==PORT_DIR_IN?(this.portIn=t,this.portOut=e):(this.portIn=e,this.portOut=t),t.addLink(this),e.addLink(this),t.onLink&&t.onLink(this),e.onLink&&e.onLink(this),void this.setValue()):(console.log("cannot link ports!"),!1)},this.getSerialized=function(){var t={};return t.portIn=this.portIn.getName(),t.portOut=this.portOut.getName(),t.objIn=this.portIn.parent.id,t.objOut=this.portOut.parent.id,t}};Link.canLinkText=function(t,e){if(t.direction==e.direction){var i="(out)";return e.direction==PORT_DIR_IN&&(i="(in)"),"can not link: same direction"+i}return t.parent==e.parent?"can not link: same op":t.type!=OP_PORT_TYPE_DYNAMIC&&e.type!=OP_PORT_TYPE_DYNAMIC&&t.type!=e.type?"can not link: different type":t?e?t.direction==PORT_DIR_IN&&t.isAnimated()?"can not link: is animated":e.direction==PORT_DIR_IN&&e.isAnimated()?"can not link: is animated":t.direction==PORT_DIR_IN&&t.links.length>0?"input port already busy":e.direction==PORT_DIR_IN&&e.links.length>0?"input port already busy":t.isLinkedTo(e)?"ports already linked":"can link":"can not link: port 2 invalid":"can not link: port 1 invalid"},Link.canLink=function(t,e){return t.type==OP_PORT_TYPE_DYNAMIC||e.type==OP_PORT_TYPE_DYNAMIC?!0:t&&e?t.direction==PORT_DIR_IN&&t.isAnimated()?!1:e.direction==PORT_DIR_IN&&e.isAnimated()?!1:t.direction==PORT_DIR_IN&&t.links.length>0?!1:e.direction==PORT_DIR_IN&&e.links.length>0?!1:t.isLinkedTo(e)?!1:t.direction==e.direction?!1:t.type!=e.type?!1:t.parent==e.parent?!1:!0:!1};var Scene=function(){var self=this;this.ops=[],this.settings={},this.timer=new Timer,this.animFrameOps=[],this.gui=!1,this.onLoadStart=null,this.onLoadEnd=null,this.clear=function(){for(self.animFrameOps.length=0,this.timer=new Timer;this.ops.length>0;)this.deleteOp(this.ops[0].id)},this.addOp=function(objName,uiAttribs){var op=eval("new "+objName+"();");return op.objName=objName,op.patch=this,op.uiAttr(uiAttribs),op.onCreate&&op.onCreate(),op.hasOwnProperty("onAnimFrame")&&this.animFrameOps.push(op),this.ops.push(op),this.onAdd&&this.onAdd(op),op},this.deleteOp=function(t,e){for(var i in this.ops)if(this.ops[i].id==t){var n=this.ops[i],r=null,s=null;n&&(e&&this.ops[i].portsIn.length>0&&this.ops[i].portsIn[0].isLinked()&&this.ops[i].portsOut.length>0&&this.ops[i].portsOut[0].isLinked()&&this.ops[i].portsIn[0].getType()==this.ops[i].portsOut[0].getType()&&(r=this.ops[i].portsIn[0].links[0].getOtherPort(this.ops[i].portsIn[0]),s=this.ops[i].portsOut[0].links[0].getOtherPort(this.ops[i].portsOut[0])),this.ops[i].removeLinks(),this.onDelete(this.ops[i]),this.ops[i].id=generateUUID(),this.ops.splice(i,1),null!==r&&null!==s&&self.link(r.parent,r.getName(),s.parent,s.getName()))}},this.exec=function(t){CGL.getLoadingStatus()>0&&CGL.getLoadingStatus()<1?setTimeout(function(){requestAnimationFrame(self.exec)},120):requestAnimationFrame(self.exec),self.timer.update();for(var e=self.timer.getTime(),i=0;i<self.animFrameOps.length;++i)self.animFrameOps[i].onAnimFrame(e)},this.link=function(t,e,i,n){if(t&&i){var r=t.getPort(e),s=i.getPort(n);if(!r)return void console.warn("port not found! "+e);if(!s)return void console.warn("port not found! "+n);if(!r.shouldLink(r,s)||!s.shouldLink(r,s))return!1;if(Link.canLink(r,s)){var o=new Link(this);return o.link(r,s),this.onLink(r,s),o}console.log(Link.canLinkText(r,s))}},this.onAdd=function(t){},this.onDelete=function(t){},this.onLink=function(t,e){},this.onUnLink=function(t,e){},this.serialize=function(t){var e={};e.ops=[],e.settings=this.settings;for(var i in this.ops)e.ops.push(this.ops[i].getSerialized());return t?e:JSON.stringify(e)},this.getOpById=function(t){for(var e in this.ops)if(this.ops[e].id==t)return this.ops[e]},this.getSubPatchOp=function(t,e){for(var i in self.ops)if(self.ops[i].uiAttribs&&self.ops[i].uiAttribs.subPatch==t&&self.ops[i].objName==e)return self.ops[i];return!1},this.deSerialize=function(t){function e(t,e,n,r){var s=!1;s||i.link(i.getOpById(t),n,i.getOpById(e),r)}this.onLoadStart&&this.onLoadStart(),"string"==typeof t&&(t=JSON.parse(t));var i=this;this.settings=t.settings,console.log("add ops ");for(var n in t.ops){var r=this.addOp(t.ops[n].objName,t.ops[n].uiAttribs);r.id=t.ops[n].id;for(var s in t.ops[n].portsIn){var o=t.ops[n].portsIn[s],l=r.getPort(o.name);if(l&&l.type!=OP_PORT_TYPE_TEXTURE&&(l.val=o.value),o.animated&&l.setAnimated(o.animated),o.anim){l.anim||(l.anim=new CABLES.TL.Anim),o.anim.loop&&(l.anim.loop=o.anim.loop);for(var a in o.anim.keys)l.anim.keys.push(new CABLES.TL.Key(o.anim.keys[a]))}}for(var h in t.ops[n].portsOut){var g=r.getPort(t.ops[n].portsOut[h].name);g&&g.type!=OP_PORT_TYPE_TEXTURE&&(g.val=t.ops[n].portsOut[h].value)}}console.log("create links...");for(n in t.ops)for(var u in t.ops[n].portsIn)for(var c in t.ops[n].portsIn[u].links)e(t.ops[n].portsIn[u].links[c].objIn,t.ops[n].portsIn[u].links[c].objOut,t.ops[n].portsIn[u].links[c].portIn,t.ops[n].portsIn[u].links[c].portOut);console.log("create uuids ");for(var f in this.ops)this.ops[f].id=generateUUID();this.onLoadEnd&&this.onLoadEnd()},this.exec()},CABLES=CABLES||{};CABLES.TL=CABLES.TL||{},CABLES.TL.EASING_LINEAR=0,CABLES.TL.EASING_ABSOLUTE=1,CABLES.TL.EASING_SMOOTHSTEP=2,CABLES.TL.EASING_SMOOTHERSTEP=3,CABLES.TL.EASING_BEZIER=4,CABLES.TL.EASING_CUBIC_IN=5,CABLES.TL.EASING_CUBIC_OUT=6,CABLES.TL.EASING_CUBIC_INOUT=7,CABLES.TL.EASING_EXPO_IN=8,CABLES.TL.EASING_EXPO_OUT=9,CABLES.TL.EASING_EXPO_INOUT=10,CABLES.TL.EASING_SIN_IN=11,CABLES.TL.EASING_SIN_OUT=12,CABLES.TL.EASING_SIN_INOUT=13,CABLES.TL.Key=function(t){function e(t,e,i){return parseFloat(e.value)+parseFloat(i.value-e.value)*t}this.time=0,this.value=0,this.ui={},this.onChange=null;var i=0;this.bezTime=.5,this.bezValue=0,this.bezTimeIn=-.5,this.bezValueIn=0;var n=null,r=!1,s=this;this.setBezierControlOut=function(t,e){this.bezTime=t,this.bezValue=e,r=!0,null!==this.onChange&&this.onChange()},this.setBezierControlIn=function(t,e){this.bezTimeIn=t,this.bezValueIn=e,r=!0,null!==this.onChange&&this.onChange()},this.setValue=function(t){this.value=t,r=!0,null!==this.onChange&&this.onChange()},this.set=function(t){t&&(t.e&&this.setEasing(t.e),t.b&&(this.bezTime=t.b[0],this.bezValue=t.b[1],this.bezTimeIn=t.b[2],this.bezValueIn=t.b[3],r=!0),t.hasOwnProperty("t")&&(this.time=t.t),t.hasOwnProperty("time")&&(this.time=t.time),t.hasOwnProperty("v")?this.value=t.v:t.hasOwnProperty("value")&&(this.value=t.value)),null!==this.onChange&&this.onChange()},this.getSerialized=function(){var t={};return t.t=this.time,t.v=this.value,t.e=i,i==CABLES.TL.EASING_BEZIER&&(t.b=[this.bezTime,this.bezValue,this.bezTimeIn,this.bezValueIn]),t},this.easeLinear=function(t,i){return e(t,this,i)},this.easeAbsolute=function(t,e){return this.value},this.easeExpoIn=function(t,i){return t=Math.pow(2,10*(t-1)),e(t,this,i)},this.easeExpoOut=function(t,i){return t=-Math.pow(2,-10*t)+1,e(t,this,i)},this.easeExpoInOut=function(t,i){return t*=2,1>t?t=.5*Math.pow(2,10*(t-1)):(t--,t=.5*(-Math.pow(2,-10*t)+2)),e(t,this,i)},this.easeSinIn=function(t,i){return t=-1*Math.cos(t*Math.PI/2)+1,e(t,this,i)},this.easeSinOut=function(t,i){return t=Math.sin(t*Math.PI/2),e(t,this,i)},this.easeSinInOut=function(t,i){return t=-.5*(Math.cos(Math.PI*t)-1),e(t,this,i)},this.easeCubicIn=function(t,i){return t=t*t*t,e(t,this,i)},
this.easeCubicOut=function(t,i){return t--,t=t*t*t+1,e(t,this,i)},this.easeCubicInOut=function(t,i){return t*=2,1>t?t=.5*t*t*t:(t-=2,t=.5*(t*t*t+2)),e(t,this,i)},this.easeSmoothStep=function(t,i){var n=Math.max(0,Math.min(1,(t-0)/1));return t=n*n*(3-2*n),e(t,this,i)},this.easeSmootherStep=function(t,i){var n=Math.max(0,Math.min(1,(t-0)/1));return t=n*n*n*(n*(6*n-15)+10),e(t,this,i)},BezierB1=function(t){return t*t*t},BezierB2=function(t){return 3*t*t*(1-t)},BezierB3=function(t){return 3*t*(1-t)*(1-t)},BezierB4=function(t){return(1-t)*(1-t)*(1-t)},Bezier=function(t,e){var i=e.time,n=e.value,r=e.time+e.bezTimeIn,o=e.value-e.bezValueIn,l=s.time,a=s.value,h=s.time+s.bezTime,g=s.value-s.bezValue,u=i*BezierB1(t)+r*BezierB2(t)+l*BezierB3(t)+h*BezierB4(t),c=n*BezierB1(t)+o*BezierB2(t)+a*BezierB3(t)+g*BezierB4(t);return{x:u,y:c}},this.easeBezier=function(t,e){n||(n=new CABLES.TL.Anim,r=!0);var i=e.time-s.time;if(r){n.clear();for(var o=20,l=1/o,a=0;o>a;a++){{var h=Bezier(a*l,e);s.time+i/o*a}n.setValue(h.x,h.y)}r=!1}return n.getValue(s.time+t*i)},this.getEasing=function(){return i},this.setEasing=function(t){i=t,i==CABLES.TL.EASING_ABSOLUTE?this.ease=this.easeAbsolute:i==CABLES.TL.EASING_SMOOTHSTEP?this.ease=this.easeSmoothStep:i==CABLES.TL.EASING_SMOOTHERSTEP?this.ease=this.easeSmootherStep:i==CABLES.TL.EASING_CUBIC_IN?this.ease=this.easeCubicIn:i==CABLES.TL.EASING_CUBIC_OUT?this.ease=this.easeCubicOut:i==CABLES.TL.EASING_CUBIC_INOUT?this.ease=this.easeCubicInOut:i==CABLES.TL.EASING_EXPO_IN?this.ease=this.easeExpoIn:i==CABLES.TL.EASING_EXPO_OUT?this.ease=this.easeExpoOut:i==CABLES.TL.EASING_EXPO_INOUT?this.ease=this.easeExpoInOut:i==CABLES.TL.EASING_SIN_IN?this.ease=this.easeSinIn:i==CABLES.TL.EASING_SIN_OUT?this.ease=this.easeSinOut:i==CABLES.TL.EASING_SIN_INOUT?this.ease=this.easeSinInOut:i==CABLES.TL.EASING_BEZIER?(r=!0,this.ease=this.easeBezier):(i=CABLES.TL.EASING_LINEAR,this.ease=this.easeLinear)},this.setEasing(CABLES.TL.EASING_LINEAR),this.set(t)},CABLES.TL.Anim=function(t){this.keys=[],this.onChange=null,this.stayInTimeline=!1,this.loop=!1,this.defaultEasing=CABLES.TL.EASING_LINEAR,this.clear=function(){this.keys.length=0},this.sortKeys=function(){this.keys.sort(function(t,e){return parseFloat(t.time)-parseFloat(e.time)})},this.getKeyIndex=function(t){var e=0;for(var i in this.keys)if(t>=this.keys[i].time&&(e=i),this.keys[i].time>t)return e;return e},this.setValue=function(t,e){var i=!1;for(var n in this.keys)if(this.keys[n].time==t){i=this.keys[n],this.keys[n].setValue(e);break}i||(console.log("not found"),this.keys.push(new CABLES.TL.Key({time:t,value:e,e:this.defaultEasing}))),this.onChange&&this.onChange(),this.sortKeys()},this.getSerialized=function(){var t={};t.keys=[],t.loop=this.loop;for(var e in this.keys)t.keys.push(this.keys[e].getSerialized());return t},this.getKey=function(t){var e=this.getKeyIndex(t);return this.keys[e]},this.getValue=function(t){if(0===this.keys.length)return 0;if(t<this.keys[0].time)return this.keys[0].value;this.loop&&t>this.keys[this.keys.length-1].time&&(t=(t-this.keys[0].time)%(this.keys[this.keys.length-1].time-this.keys[0].time),t+=this.keys[0].time);var e=this.getKeyIndex(t);if(e>=this.keys.length-1)return this.keys[this.keys.length-1].value;var i=parseInt(e,10)+1,n=this.keys[e],r=this.keys[i];if(!r)return-1;var s=(t-n.time)/(r.time-n.time);return n.ease(s,r)},this.addKey=function(t){void 0===t.time?console.log("key time undefined, ignoreing!"):this.keys.push(t)}},String.prototype.endl=function(){return this+"\n"};
//# sourceMappingURL=cables.min.js.map