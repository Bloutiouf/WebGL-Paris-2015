!function(t){"use strict";var n={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n.exports={},define(function(){return n.exports})):n.exports="undefined"!=typeof window?window:t:n.exports=exports,function(t){if(!n)var n=1e-6;if(!e)var e="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var i={};i.setMatrixArrayType=function(t){e=t},"undefined"!=typeof t&&(t.glMatrix=i);var o=Math.PI/180;i.toRadian=function(t){return t*o};var a={};a.create=function(){var t=new e(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var n=new e(2);return n[0]=t[0],n[1]=t[1],n},a.fromValues=function(t,n){var r=new e(2);return r[0]=t,r[1]=n,r},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},a.set=function(t,n,e){return t[0]=n,t[1]=e,t},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t},a.sub=a.subtract,a.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t},a.mul=a.multiply,a.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t},a.div=a.divide,a.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},a.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},a.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},a.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},a.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)},a.dist=a.distance,a.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)},a.len=a.length,a.squaredLength=function(t){var n=t[0],e=t[1];return n*n+e*e},a.sqrLen=a.squaredLength,a.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},a.normalize=function(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t},a.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},a.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,n,e,r){var i=n[0],o=n[1];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t},a.random=function(t,n){n=n||1;var e=2*r()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},a.transformMat2=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i,t[1]=e[1]*r+e[3]*i,t},a.transformMat2d=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i+e[4],t[1]=e[1]*r+e[3]*i+e[5],t},a.transformMat3=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[3]*i+e[6],t[1]=e[1]*r+e[4]*i+e[7],t},a.transformMat4=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[4]*i+e[12],t[1]=e[1]*r+e[5]*i+e[13],t},a.forEach=function(){var t=a.create();return function(n,e,r,i,o,a){var s,u;for(e||(e=2),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],o(t,t,a),n[s]=t[0],n[s+1]=t[1];return n}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=a);var s={};s.create=function(){var t=new e(3);return t[0]=0,t[1]=0,t[2]=0,t},s.clone=function(t){var n=new e(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},s.fromValues=function(t,n,r){var i=new e(3);return i[0]=t,i[1]=n,i[2]=r,i},s.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},s.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},s.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},s.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t},s.sub=s.subtract,s.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t},s.mul=s.multiply,s.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t},s.div=s.divide,s.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},s.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},s.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},s.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},s.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(e*e+r*r+i*i)},s.dist=s.distance,s.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return e*e+r*r+i*i},s.sqrDist=s.squaredDistance,s.length=function(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)},s.len=s.length,s.squaredLength=function(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r},s.sqrLen=s.squaredLength,s.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},s.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=e*e+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t},s.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},s.cross=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},s.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t},s.random=function(t,n){n=n||1;var e=2*r()*Math.PI,i=2*r()-1,o=Math.sqrt(1-i*i)*n;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=i*n,t},s.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12],t[1]=e[1]*r+e[5]*i+e[9]*o+e[13],t[2]=e[2]*r+e[6]*i+e[10]*o+e[14],t},s.transformMat3=function(t,n,e){var r=n[0],i=n[1],o=n[2];return t[0]=r*e[0]+i*e[3]+o*e[6],t[1]=r*e[1]+i*e[4]+o*e[7],t[2]=r*e[2]+i*e[5]+o*e[8],t},s.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],h=c*r+s*o-u*i,l=c*i+u*r-a*o,f=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=h*c+p*-a+l*-u-f*-s,t[1]=l*c+p*-s+f*-a-h*-u,t[2]=f*c+p*-u+h*-s-l*-a,t},s.rotateX=function(t,n,e,r){var i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},s.rotateY=function(t,n,e,r){var i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},s.rotateZ=function(t,n,e,r){var i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},s.forEach=function(){var t=s.create();return function(n,e,r,i,o,a){var s,u;for(e||(e=3),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2];return n}}(),s.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=s);var u={};u.create=function(){var t=new e(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},u.clone=function(t){var n=new e(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},u.fromValues=function(t,n,r,i){var o=new e(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,o},u.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},u.set=function(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t},u.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},u.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t},u.sub=u.subtract,u.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t},u.mul=u.multiply,u.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t},u.div=u.divide,u.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},u.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},u.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},u.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},u.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+o*o)},u.dist=u.distance,u.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+i*i+o*o},u.sqrDist=u.squaredDistance,u.length=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)},u.len=u.length,u.squaredLength=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i},u.sqrLen=u.squaredLength,u.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},u.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a),t},u.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},u.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2],s=n[3];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t[3]=s+r*(e[3]-s),t},u.random=function(t,n){return n=n||1,t[0]=r(),t[1]=r(),t[2]=r(),t[3]=r(),u.normalize(t,t),u.scale(t,t,n),t},u.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12]*a,t[1]=e[1]*r+e[5]*i+e[9]*o+e[13]*a,t[2]=e[2]*r+e[6]*i+e[10]*o+e[14]*a,t[3]=e[3]*r+e[7]*i+e[11]*o+e[15]*a,t},u.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],h=c*r+s*o-u*i,l=c*i+u*r-a*o,f=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=h*c+p*-a+l*-u-f*-s,t[1]=l*c+p*-s+f*-a-h*-u,t[2]=f*c+p*-u+h*-s-l*-a,t},u.forEach=function(){var t=u.create();return function(n,e,r,i,o,a){var s,u;for(e||(e=4),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],t[3]=n[s+3],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2],n[s+3]=t[3];return n}}(),u.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=u);var c={};c.create=function(){var t=new e(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.clone=function(t){var n=new e(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},c.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},c.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=e*a,t):null},c.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},c.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},c.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*h,t[3]=i*c+a*h,t},c.mul=c.multiply,c.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},c.scale=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},c.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},c.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},"undefined"!=typeof t&&(t.mat2=c);var h={};h.create=function(){var t=new e(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.clone=function(t){var n=new e(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},h.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=e*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=e*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-e*s)*u,t):null},h.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},h.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1],l=e[2],f=e[3],p=e[4],d=e[5];return t[0]=r*c+o*h,t[1]=i*c+a*h,t[2]=r*l+o*f,t[3]=i*l+a*f,t[4]=r*p+o*d+s,t[5]=i*p+a*d+u,t},h.mul=h.multiply,h.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=Math.sin(e),h=Math.cos(e);return t[0]=r*h+o*c,t[1]=i*h+a*c,t[2]=r*-c+o*h,t[3]=i*-c+a*h,t[4]=s,t[5]=u,t},h.scale=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1];return t[0]=r*c,t[1]=i*c,t[2]=o*h,t[3]=a*h,t[4]=s,t[5]=u,t},h.translate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*h+s,t[5]=i*c+a*h+u,t},h.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=h);var l={};l.create=function(){var t=new e(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},l.clone=function(t){var n=new e(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},l.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},l.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=h*a-s*c,f=-h*o+s*u,p=c*o-a*u,d=e*l+r*f+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-h*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=f*d,t[4]=(h*e-i*u)*d,t[5]=(-s*e+i*o)*d,t[6]=p*d,t[7]=(-c*e+r*u)*d,t[8]=(a*e-r*o)*d,t):null},l.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8];return t[0]=a*h-s*c,t[1]=i*c-r*h,t[2]=r*s-i*a,t[3]=s*u-o*h,t[4]=e*h-i*u,t[5]=i*o-e*s,t[6]=o*c-a*u,t[7]=r*u-e*c,t[8]=e*a-r*o,t},l.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return n*(c*o-a*u)+e*(-c*i+a*s)+r*(u*i-o*s)},l.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=e[0],p=e[1],d=e[2],v=e[3],m=e[4],g=e[5],y=e[6],M=e[7],w=e[8];return t[0]=f*r+p*a+d*c,t[1]=f*i+p*s+d*h,t[2]=f*o+p*u+d*l,t[3]=v*r+m*a+g*c,t[4]=v*i+m*s+g*h,t[5]=v*o+m*u+g*l,t[6]=y*r+M*a+w*c,t[7]=y*i+M*s+w*h,t[8]=y*o+M*u+w*l,t},l.mul=l.multiply,l.translate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=e[0],p=e[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+p*a+c,t[7]=f*i+p*s+h,t[8]=f*o+p*u+l,t},l.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=Math.sin(e),p=Math.cos(e);return t[0]=p*r+f*a,t[1]=p*i+f*s,t[2]=p*o+f*u,t[3]=p*a-f*r,t[4]=p*s-f*i,t[5]=p*u-f*o,t[6]=c,t[7]=h,t[8]=l,t},l.scale=function(t,n,e){var r=e[0],i=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},l.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},l.fromQuat=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e+e,s=r+r,u=i+i,c=e*a,h=r*a,l=r*s,f=i*a,p=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return t[0]=1-l-d,t[3]=h-g,t[6]=f+m,t[1]=h+g,t[4]=1-c-d,t[7]=p-v,t[2]=f-m,t[5]=p+v,t[8]=1-c-l,t},l.normalFromMat4=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=n[9],f=n[10],p=n[11],d=n[12],v=n[13],m=n[14],g=n[15],y=e*s-r*a,M=e*u-i*a,w=e*c-o*a,b=r*u-i*s,x=r*c-o*s,_=i*c-o*u,q=h*v-l*d,F=h*m-f*d,E=h*g-p*d,A=l*m-f*v,P=l*g-p*v,S=f*g-p*m,k=y*S-M*P+w*A+b*E-x*F+_*q;return k?(k=1/k,t[0]=(s*S-u*P+c*A)*k,t[1]=(u*E-a*S-c*F)*k,t[2]=(a*P-s*E+c*q)*k,t[3]=(i*P-r*S-o*A)*k,t[4]=(e*S-i*E+o*F)*k,t[5]=(r*E-e*P-o*q)*k,t[6]=(v*_-m*x+g*b)*k,t[7]=(m*w-d*_-g*M)*k,t[8]=(d*x-v*w+g*y)*k,t):null},l.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=l);var f={};f.create=function(){var t=new e(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f.clone=function(t){var n=new e(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},f.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],o=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},f.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=n[9],f=n[10],p=n[11],d=n[12],v=n[13],m=n[14],g=n[15],y=e*s-r*a,M=e*u-i*a,w=e*c-o*a,b=r*u-i*s,x=r*c-o*s,_=i*c-o*u,q=h*v-l*d,F=h*m-f*d,E=h*g-p*d,A=l*m-f*v,P=l*g-p*v,S=f*g-p*m,k=y*S-M*P+w*A+b*E-x*F+_*q;return k?(k=1/k,t[0]=(s*S-u*P+c*A)*k,t[1]=(i*P-r*S-o*A)*k,t[2]=(v*_-m*x+g*b)*k,t[3]=(f*x-l*_-p*b)*k,t[4]=(u*E-a*S-c*F)*k,t[5]=(e*S-i*E+o*F)*k,t[6]=(m*w-d*_-g*M)*k,t[7]=(h*_-f*w+p*M)*k,t[8]=(a*P-s*E+c*q)*k,t[9]=(r*E-e*P-o*q)*k,t[10]=(d*x-v*w+g*y)*k,t[11]=(l*w-h*x-p*y)*k,t[12]=(s*F-a*A-u*q)*k,t[13]=(e*A-r*F+i*q)*k,t[14]=(v*M-d*b-m*y)*k,t[15]=(h*b-l*M+f*y)*k,t):null},f.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=n[9],f=n[10],p=n[11],d=n[12],v=n[13],m=n[14],g=n[15];return t[0]=s*(f*g-p*m)-l*(u*g-c*m)+v*(u*p-c*f),t[1]=-(r*(f*g-p*m)-l*(i*g-o*m)+v*(i*p-o*f)),t[2]=r*(u*g-c*m)-s*(i*g-o*m)+v*(i*c-o*u),t[3]=-(r*(u*p-c*f)-s*(i*p-o*f)+l*(i*c-o*u)),t[4]=-(a*(f*g-p*m)-h*(u*g-c*m)+d*(u*p-c*f)),t[5]=e*(f*g-p*m)-h*(i*g-o*m)+d*(i*p-o*f),t[6]=-(e*(u*g-c*m)-a*(i*g-o*m)+d*(i*c-o*u)),t[7]=e*(u*p-c*f)-a*(i*p-o*f)+h*(i*c-o*u),t[8]=a*(l*g-p*v)-h*(s*g-c*v)+d*(s*p-c*l),t[9]=-(e*(l*g-p*v)-h*(r*g-o*v)+d*(r*p-o*l)),t[10]=e*(s*g-c*v)-a*(r*g-o*v)+d*(r*c-o*s),t[11]=-(e*(s*p-c*l)-a*(r*p-o*l)+h*(r*c-o*s)),t[12]=-(a*(l*m-f*v)-h*(s*m-u*v)+d*(s*f-u*l)),t[13]=e*(l*m-f*v)-h*(r*m-i*v)+d*(r*f-i*l),t[14]=-(e*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=e*(s*f-u*l)-a*(r*f-i*l)+h*(r*u-i*s),t},f.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],m=t[15],g=n*a-e*o,y=n*s-r*o,M=n*u-i*o,w=e*s-r*a,b=e*u-i*a,x=r*u-i*s,_=c*d-h*p,q=c*v-l*p,F=c*m-f*p,E=h*v-l*d,A=h*m-f*d,P=l*m-f*v;return g*P-y*A+M*E+w*F-b*q+x*_},f.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=n[9],p=n[10],d=n[11],v=n[12],m=n[13],g=n[14],y=n[15],M=e[0],w=e[1],b=e[2],x=e[3];return t[0]=M*r+w*s+b*l+x*v,t[1]=M*i+w*u+b*f+x*m,t[2]=M*o+w*c+b*p+x*g,t[3]=M*a+w*h+b*d+x*y,M=e[4],w=e[5],b=e[6],x=e[7],t[4]=M*r+w*s+b*l+x*v,t[5]=M*i+w*u+b*f+x*m,t[6]=M*o+w*c+b*p+x*g,t[7]=M*a+w*h+b*d+x*y,M=e[8],w=e[9],b=e[10],x=e[11],t[8]=M*r+w*s+b*l+x*v,t[9]=M*i+w*u+b*f+x*m,t[10]=M*o+w*c+b*p+x*g,t[11]=M*a+w*h+b*d+x*y,M=e[12],w=e[13],b=e[14],x=e[15],t[12]=M*r+w*s+b*l+x*v,t[13]=M*i+w*u+b*f+x*m,t[14]=M*o+w*c+b*p+x*g,t[15]=M*a+w*h+b*d+x*y,t},f.mul=f.multiply,f.translate=function(t,n,e){var r,i,o,a,s,u,c,h,l,f,p,d,v=e[0],m=e[1],g=e[2];return n===t?(t[12]=n[0]*v+n[4]*m+n[8]*g+n[12],t[13]=n[1]*v+n[5]*m+n[9]*g+n[13],t[14]=n[2]*v+n[6]*m+n[10]*g+n[14],t[15]=n[3]*v+n[7]*m+n[11]*g+n[15]):(r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=n[9],p=n[10],d=n[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=h,t[8]=l,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+s*m+l*g+n[12],t[13]=i*v+u*m+f*g+n[13],t[14]=o*v+c*m+p*g+n[14],t[15]=a*v+h*m+d*g+n[15]),t},f.scale=function(t,n,e){var r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},f.rotate=function(t,e,r,i){var o,a,s,u,c,h,l,f,p,d,v,m,g,y,M,w,b,x,_,q,F,E,A,P,S=i[0],k=i[1],z=i[2],L=Math.sqrt(S*S+k*k+z*z);return Math.abs(L)<n?null:(L=1/L,S*=L,k*=L,z*=L,o=Math.sin(r),a=Math.cos(r),s=1-a,u=e[0],c=e[1],h=e[2],l=e[3],f=e[4],p=e[5],d=e[6],v=e[7],m=e[8],g=e[9],y=e[10],M=e[11],w=S*S*s+a,b=k*S*s+z*o,x=z*S*s-k*o,_=S*k*s-z*o,q=k*k*s+a,F=z*k*s+S*o,E=S*z*s+k*o,A=k*z*s-S*o,P=z*z*s+a,t[0]=u*w+f*b+m*x,t[1]=c*w+p*b+g*x,t[2]=h*w+d*b+y*x,t[3]=l*w+v*b+M*x,t[4]=u*_+f*q+m*F,t[5]=c*_+p*q+g*F,t[6]=h*_+d*q+y*F,t[7]=l*_+v*q+M*F,t[8]=u*E+f*A+m*P,t[9]=c*E+p*A+g*P,t[10]=h*E+d*A+y*P,t[11]=l*E+v*A+M*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},f.rotateX=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[4],a=n[5],s=n[6],u=n[7],c=n[8],h=n[9],l=n[10],f=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*r,t[5]=a*i+h*r,t[6]=s*i+l*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=h*i-a*r,t[10]=l*i-s*r,t[11]=f*i-u*r,t},f.rotateY=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[8],h=n[9],l=n[10],f=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*r,t[1]=a*i-h*r,t[2]=s*i-l*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+h*i,t[10]=s*r+l*i,t[11]=u*r+f*i,t},f.rotateZ=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],h=n[5],l=n[6],f=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*r,t[1]=a*i+h*r,t[2]=s*i+l*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=h*i-a*r,t[6]=l*i-s*r,t[7]=f*i-u*r,t},f.fromRotationTranslation=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=r+r,u=i+i,c=o+o,h=r*s,l=r*u,f=r*c,p=i*u,d=i*c,v=o*c,m=a*s,g=a*u,y=a*c;return t[0]=1-(p+v),t[1]=l+y,t[2]=f-g,t[3]=0,t[4]=l-y,t[5]=1-(h+v),t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-(h+p),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},f.fromQuat=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e+e,s=r+r,u=i+i,c=e*a,h=r*a,l=r*s,f=i*a,p=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return t[0]=1-l-d,t[1]=h+g,t[2]=f-m,t[3]=0,t[4]=h-g,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=f+m,t[9]=p-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f.frustum=function(t,n,e,r,i,o,a){var s=1/(e-n),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},f.perspective=function(t,n,e,r,i){var o=1/Math.tan(n/2),a=1/(r-i);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},f.ortho=function(t,n,e,r,i,o,a){var s=1/(n-e),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},f.lookAt=function(t,e,r,i){var o,a,s,u,c,h,l,p,d,v,m=e[0],g=e[1],y=e[2],M=i[0],w=i[1],b=i[2],x=r[0],_=r[1],q=r[2];return Math.abs(m-x)<n&&Math.abs(g-_)<n&&Math.abs(y-q)<n?f.identity(t):(l=m-x,p=g-_,d=y-q,v=1/Math.sqrt(l*l+p*p+d*d),l*=v,p*=v,d*=v,o=w*d-b*p,a=b*l-M*d,s=M*p-w*l,v=Math.sqrt(o*o+a*a+s*s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),u=p*s-d*a,c=d*o-l*s,h=l*a-p*o,v=Math.sqrt(u*u+c*c+h*h),v?(v=1/v,u*=v,c*=v,h*=v):(u=0,c=0,h=0),t[0]=o,t[1]=u,t[2]=l,t[3]=0,t[4]=a,t[5]=c,t[6]=p,t[7]=0,t[8]=s,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*m+a*g+s*y),t[13]=-(u*m+c*g+h*y),t[14]=-(l*m+p*g+d*y),t[15]=1,t)},f.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=f);var p={};p.create=function(){var t=new e(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.rotationTo=function(){var t=s.create(),n=s.fromValues(1,0,0),e=s.fromValues(0,1,0);return function(r,i,o){var a=s.dot(i,o);return-.999999>a?(s.cross(t,n,i),s.length(t)<1e-6&&s.cross(t,e,i),s.normalize(t,t),p.setAxisAngle(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(s.cross(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,p.normalize(r,r))}}(),p.setAxes=function(){var t=l.create();return function(n,e,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],p.normalize(n,p.fromMat3(n,t))}}(),p.clone=u.clone,p.fromValues=u.fromValues,p.copy=u.copy,p.set=u.set,p.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.setAxisAngle=function(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t},p.add=u.add,p.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=r*h+a*s+i*c-o*u,t[1]=i*h+a*u+o*s-r*c,t[2]=o*h+a*c+r*u-i*s,t[3]=a*h-r*s-i*u-o*c,t},p.mul=p.multiply,p.scale=u.scale,p.rotateX=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},p.rotateY=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},p.rotateZ=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},p.calculateW=function(t,n){var e=n[0],r=n[1],i=n[2];return t[0]=e,t[1]=r,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-e*e-r*r-i*i)),t},p.dot=u.dot,p.lerp=u.lerp,p.slerp=function(t,n,e,r){var i,o,a,s,u,c=n[0],h=n[1],l=n[2],f=n[3],p=e[0],d=e[1],v=e[2],m=e[3];return o=c*p+h*d+l*v+f*m,0>o&&(o=-o,p=-p,d=-d,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*h+u*d,t[2]=s*l+u*v,t[3]=s*f+u*m,t},p.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-e*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},p.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},p.length=u.length,p.len=p.length,p.squaredLength=u.squaredLength,p.sqrLen=p.squaredLength,p.normalize=u.normalize,p.fromMat3=function(t,n){var e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[7]-n[5])*e,t[1]=(n[2]-n[6])*e,t[2]=(n[3]-n[1])*e;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;e=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*a+a]+1),t[i]=.5*e,e=.5/e,t[3]=(n[3*a+o]-n[3*o+a])*e,t[o]=(n[3*o+i]+n[3*i+o])*e,t[a]=(n[3*a+i]+n[3*i+a])*e}return t},p.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=p)}(n.exports)}(this),!function(t,n,e){function r(e,o){if(!n[e]){if(!t[e]){var a="function"==typeof require&&require;if(!o&&a)return a(e,!0);if(i)return i(e,!0);throw new Error("Cannot find module '"+e+"'")}var s=n[e]={exports:{}};t[e][0].call(s.exports,function(n){var i=t[e][1][n];return r(i?i:n)},s,s.exports)}return n[e].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,n){var e=(t("./pointable"),t("gl-matrix")),r=e.vec3,i=e.mat3,o=e.mat4,a=(t("underscore"),n.exports=function(t,n){this.finger=t,this._center=null,this._matrix=null,this.type=n.type,this.prevJoint=n.prevJoint,this.nextJoint=n.nextJoint,this.width=n.width;var e=new Array(3);r.sub(e,n.nextJoint,n.prevJoint),this.length=r.length(e),this.basis=n.basis});a.prototype.left=function(){return this._left?this._left:(this._left=i.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0,this._left)},a.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,n=this._matrix=o.create();return n[0]=t[0][0],n[1]=t[0][1],n[2]=t[0][2],n[4]=t[1][0],n[5]=t[1][1],n[6]=t[1][2],n[8]=t[2][0],n[9]=t[2][1],n[10]=t[2][2],n[3]=this.center()[0],n[7]=this.center()[1],n[11]=this.center()[2],this.left()&&(n[0]*=-1,n[1]*=-1,n[2]*=-1),this._matrix},a.prototype.lerp=function(t,n){r.lerp(t,this.prevJoint,this.nextJoint,n)},a.prototype.center=function(){if(this._center)return this._center;var t=r.create();return this.lerp(t,.5),this._center=t,t},a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{"./pointable":14,"gl-matrix":23,underscore:24}],2:[function(t,n){var e=n.exports=function(t){this.pos=0,this._buf=[],this.size=t};e.prototype.get=function(t){return void 0==t&&(t=0),t>=this.size?void 0:t>=this._buf.length?void 0:this._buf[(this.pos-t-1)%this.size]},e.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],3:[function(t,n){var e=t("../protocol").chooseProtocol,r=t("events").EventEmitter,i=t("underscore"),o=n.exports=function(t){this.opts=i.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:o.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),console.log(this.opts.optimizeHMD?"Optimized for head mounted display usage.":"Optimized for desktop usage.")})};o.defaultProtocolVersion=6,o.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},o.prototype.getScheme=function(){return"ws:"},o.prototype.getPort=function(){return 6437},o.prototype.setBackground=function(t){this.opts.background=t,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},o.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},o.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},o.prototype.enableGestures=function(t){this.gesturesEnabled=t?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},o.prototype.handleClose=function(t){this.connected&&(this.disconnect(),1001===t&&this.opts.requestProtocolVersion>1&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},o.prototype.startReconnection=function(){var t=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){t.reconnect()},500))},o.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},o.prototype.disconnect=function(t){return t||this.stopReconnection(),this.socket?(this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0):void 0},o.prototype.reconnect=function(){
this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},o.prototype.handleData=function(t){var n,r=JSON.parse(t);void 0===this.protocol?(n=this.protocol=e(r),this.protocolVersionVerified=!0,this.emit("ready")):n=this.protocol(r),this.emit(n.type,n)},o.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},o.prototype.send=function(t){this.socket.send(t)},o.prototype.reportFocus=function(t){this.connected&&this.focusedState!==t&&(this.focusedState=t,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},i.extend(o.prototype,r.prototype)},{"../protocol":15,events:21,underscore:24}],4:[function(t,n){var e=n.exports=t("./base"),r=t("underscore"),i=n.exports=function(t){e.call(this,t);var n=this;this.on("ready",function(){n.startFocusLoop()}),this.on("disconnect",function(){n.stopFocusLoop()})};r.extend(i.prototype,e.prototype),i.__proto__=e,i.prototype.useSecure=function(){return"https:"===location.protocol},i.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},i.prototype.getPort=function(){return this.useSecure()?6436:6437},i.prototype.setupSocket=function(){var t=this,n=new WebSocket(this.getUrl());return n.onopen=function(){t.handleOpen()},n.onclose=function(n){t.handleClose(n.code,n.reason)},n.onmessage=function(n){t.handleData(n.data)},n.onerror=function(){t.useSecure()&&"wss:"===t.scheme&&(t.scheme="ws:",t.port=6437,t.disconnect(),t.connect())},n},i.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var t=this,n=null;n="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0,void 0===t.windowVisible&&(t.windowVisible=void 0===n?!0:document[n]===!1);var e=window.addEventListener("focus",function(){t.windowVisible=!0,i()}),r=window.addEventListener("blur",function(){t.windowVisible=!1,i()});this.on("disconnect",function(){window.removeEventListener("focus",e),window.removeEventListener("blur",r)});var i=function(){var e=void 0===n?!0:document[n]===!1;t.reportFocus(e&&t.windowVisible)};i(),this.focusDetectorTimer=setInterval(i,100)}},i.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3,underscore:24}],5:[function(t,n){var e=t("__browserify_process"),r=t("./frame"),i=t("./hand"),o=t("./pointable"),a=t("./finger"),s=t("./circular_buffer"),u=t("./pipeline"),c=t("events").EventEmitter,h=t("./gesture").gestureListener,l=t("./dialog"),f=t("underscore"),p=n.exports=function(n){var i="undefined"!=typeof e&&e.versions&&e.versions.node,o=this;n=f.defaults(n||{},{inNode:i}),this.inNode=n.inNode,n=f.defaults(n||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(t){o.lastConnectionFrame.valid&&o.emit("animationFrame",o.lastConnectionFrame),o.emit("frameEnd",t),o.loopWhileDisconnected&&(o.connection.focusedState!==!1||o.connection.opts.background)?window.requestAnimationFrame(o.onAnimationFrame):o.animationFrameRequested=!1},this.suppressAnimationLoop=n.suppressAnimationLoop,this.loopWhileDisconnected=n.loopWhileDisconnected,this.frameEventName=n.frameEventName,this.useAllPlugins=n.useAllPlugins,this.history=new s(200),this.lastFrame=r.Invalid,this.lastValidFrame=r.Invalid,this.lastConnectionFrame=r.Invalid,this.accumulatedGestures=[],this.checkVersion=n.checkVersion,this.connectionType=void 0===n.connectionType?t(this.inBrowser()?"./connection/browser":"./connection/node"):n.connectionType,this.connection=new this.connectionType(n),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},n.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(n),this.setupConnectionEvents(),this.startAnimationLoop()};p.prototype.gesture=function(t,n){var e=h(this,t);return void 0!==n&&e.stop(n),e},p.prototype.setBackground=function(t){return this.connection.setBackground(t),this},p.prototype.setOptimizeHMD=function(t){return this.connection.setOptimizeHMD(t),this},p.prototype.inBrowser=function(){return!this.inNode},p.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},p.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},p.prototype.connect=function(){return this.connection.connect(),this},p.prototype.streaming=function(){return this.streamingCount>0},p.prototype.connected=function(){return!!this.connection.connected},p.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},p.prototype.disconnect=function(){return this.connection.disconnect(),this},p.prototype.frame=function(t){return this.history.get(t)||r.Invalid},p.prototype.loop=function(t){return t&&("function"==typeof t?this.on(this.frameEventName,t):this.setupFrameEvents(t)),this.connect()},p.prototype.addStep=function(t){this.pipeline||(this.pipeline=new u(this)),this.pipeline.addStep(t)},p.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.lastConnectionFrame=t,this.startAnimationLoop(),this.emit("deviceFrame",t)},p.prototype.processFinishedFrame=function(t){if(this.lastFrame=t,t.valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var n=0;n!=t.gestures.length;n++)this.emit("gesture",t.gestures[n],t)}this.pipeline&&(t=this.pipeline.run(t),t||(t=r.Invalid)),this.emit("frame",t),this.emitHandEvents(t)},p.prototype.emitHandEvents=function(t){for(var n=0;n<t.hands.length;n++)this.emit("hand",t.hands[n])},p.prototype.setupFrameEvents=function(t){t.frame&&this.on("frame",t.frame),t.hand&&this.on("hand",t.hand)},p.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(n){t.processFrame(n)}),this.on(this.frameEventName,function(n){t.processFinishedFrame(n)});var n=function(){if(t.connection.opts.requestProtocolVersion<5&&0==t.streamingCount){t.streamingCount=1;var e={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};t.devices[e.id]=e,t.emit("deviceAttached",e),t.emit("deviceStreaming",e),t.emit("streamingStarted",e),t.connection.removeListener("frame",n)}},e=function(){if(t.streamingCount>0){for(var n in t.devices)t.emit("deviceStopped",t.devices[n]),t.emit("deviceRemoved",t.devices[n]);t.emit("streamingStopped",t.devices[n]),t.streamingCount=0;for(var n in t.devices)delete t.devices[n]}};this.connection.on("focus",function(){t.loopWhileDisconnected&&t.startAnimationLoop(),t.emit("focus")}),this.connection.on("blur",function(){t.emit("blur")}),this.connection.on("protocol",function(n){n.on("beforeFrameCreated",function(n){t.emit("beforeFrameCreated",n)}),n.on("afterFrameCreated",function(n,e){t.emit("afterFrameCreated",n,e)}),t.emit("protocol",n)}),this.connection.on("ready",function(){t.checkVersion&&!t.inNode&&t.checkOutOfDate(),t.emit("ready")}),this.connection.on("connect",function(){t.emit("connect"),t.connection.removeListener("frame",n),t.connection.on("frame",n)}),this.connection.on("disconnect",function(){t.emit("disconnect"),e()}),this.connection.on("deviceConnect",function(r){r.state?(t.emit("deviceConnected"),t.connection.removeListener("frame",n),t.connection.on("frame",n)):(t.emit("deviceDisconnected"),e())}),this.connection.on("deviceEvent",function(n){var e=n.state,r=t.devices[e.id],i={};for(var o in e)r&&r.hasOwnProperty(o)&&r[o]==e[o]||(i[o]=!0);t.devices[e.id]=e,i.attached&&t.emit(e.attached?"deviceAttached":"deviceRemoved",e),i.streaming&&(e.streaming?(t.streamingCount++,t.emit("deviceStreaming",e),1==t.streamingCount&&t.emit("streamingStarted",e),i.attached||t.emit("deviceConnected")):i.attached&&e.attached||(t.streamingCount--,t.emit("deviceStopped",e),0==t.streamingCount&&t.emit("streamingStopped",e),t.emit("deviceDisconnected")))}),this.on("newListener",function(t){("deviceConnected"==t||"deviceDisconnected"==t)&&console.warn(t+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},p.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion,n=this.connection.protocol.version,e=this.connectionType.defaultProtocolVersion;return e>n?(console.warn("Your Protocol Version is v"+n+", this app was designed for v"+e),l.warnOutOfDate({sV:t,pV:n}),!0):!1},p._pluginFactories={},p.plugin=function(t,n){return this._pluginFactories[t]&&console.warn('Plugin "'+t+'" already registered'),this._pluginFactories[t]=n},p.plugins=function(){return f.keys(this._pluginFactories)};var d=function(t,n,e){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(n)?this.on(n,e):(this.pipeline||(this.pipeline=new u(this)),this._pluginPipelineSteps[t]||(this._pluginPipelineSteps[t]=[]),this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(n,e)))},v=function(t,n,e){var s;switch(this._pluginExtendedMethods[t]||(this._pluginExtendedMethods[t]=[]),n){case"frame":s=r;break;case"hand":s=i;break;case"pointable":s=o,f.extend(a.prototype,e),f.extend(a.Invalid,e);break;case"finger":s=a;break;default:throw t+' specifies invalid object type "'+n+'" for prototypical extension'}f.extend(s.prototype,e),f.extend(s.Invalid,e),this._pluginExtendedMethods[t].push([s,e])};p.prototype.use=function(t,n){var e,r,i,o;if(r="function"==typeof t?t:p._pluginFactories[t],!r)throw"Leap Plugin "+t+" not found.";if(n||(n={}),this.plugins[t])return f.extend(this.plugins[t],n),this;this.plugins[t]=n,o=r.call(this,n);for(i in o)e=o[i],"function"==typeof e?d.call(this,t,i,e):v.call(this,t,i,e);return this},p.prototype.stopUsing=function(t){var n,e,r=this._pluginPipelineSteps[t],i=this._pluginExtendedMethods[t],o=0;if(this.plugins[t]){if(r)for(o=0;o<r.length;o++)this.pipeline.removeStep(r[o]);if(i)for(o=0;o<i.length;o++){n=i[o][0],e=i[o][1];for(var a in e)delete n.prototype[a],delete n.Invalid[a]}return delete this.plugins[t],this}},p.prototype.useRegisteredPlugins=function(){for(var t in p._pluginFactories)this.use(t)},f.extend(p.prototype,c.prototype)},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":20,"./dialog":6,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./pipeline":13,"./pointable":14,__browserify_process:22,events:21,underscore:24}],6:[function(t,n){var e=t("__browserify_process"),r=n.exports=function(t,n){this.options=n||{},this.message=t,this.createElement()};r.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t),t.style.className="leapjs-dialog",t.style.display="inline-block",t.style.margin="auto",t.style.padding="8px",t.style.color="#222",t.style.background="#eee",t.style.borderRadius="4px",t.style.border="1px solid #999",t.style.textAlign="left",t.style.cursor="pointer",t.style.whiteSpace="nowrap",t.style.transition="box-shadow 1s linear",t.innerHTML=this.message,this.options.onclick&&t.addEventListener("click",this.options.onclick),this.options.onmouseover&&t.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&t.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&t.addEventListener("mousemove",this.options.onmousemove)},r.prototype.show=function(){return document.body.appendChild(this.element),this},r.prototype.hide=function(){return document.body.removeChild(this.element),this},r.warnOutOfDate=function(t){t||(t={});var n="http://developer.leapmotion.com?";t.returnTo=window.location.href;for(var e in t)n+=e+"="+encodeURIComponent(t[e])+"&";var i,o=function(t){if("leapjs-decline-upgrade"!=t.target.id){var e=window.open(n,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&e.focus()}return i.hide(),!0},a="This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>";return i=new r(a,{onclick:o,onmousemove:function(t){t.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}}),i.show()},r.hasWarnedBones=!1,r.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!=typeof e&&e.versions&&e.versions.node||this.warnOutOfDate({reason:"bones"}))}},{__browserify_process:22}],7:[function(t,n){var e=t("./pointable"),r=t("./bone"),i=t("./dialog"),o=t("underscore"),a=n.exports=function(t){e.call(this,t),this.dipPosition=t.dipPosition,this.pipPosition=t.pipPosition,this.mcpPosition=t.mcpPosition,this.carpPosition=t.carpPosition,this.extended=t.extended,this.type=t.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],t.bases?this.addBones(t):i.warnBones()};o.extend(a.prototype,e.prototype),a.prototype.addBones=function(t){this.metacarpal=new r(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]}),this.proximal=new r(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]}),this.medial=new r(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]}),this.distal=new r(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},a.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},a.Invalid={valid:!1}},{"./bone":1,"./dialog":6,"./pointable":14,underscore:24}],8:[function(t,n){var e=t("./hand"),r=t("./pointable"),i=t("./gesture").createGesture,o=t("gl-matrix"),a=o.mat3,s=o.vec3,u=t("./interaction_box"),c=t("./finger"),h=t("underscore"),l=n.exports=function(t){if(this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new u(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=h.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate,t.gestures)for(var n=0,e=t.gestures.length;n!=e;n++)this.gestures.push(i(t.gestures[n]));this.postprocessData(t)};l.prototype.postprocessData=function(t){t||(t=this.data);for(var n=0,i=t.hands.length;n!=i;n++){var o=new e(t.hands[n]);o.frame=this,this.hands.push(o),this.handsMap[o.id]=o}t.pointables=h.sortBy(t.pointables,function(t){return t.id});for(var a=0,s=t.pointables.length;a!=s;a++){var u=t.pointables[a],l=u.dipPosition?new c(u):new r(u);l.frame=this,this.addPointable(l)}},l.prototype.addPointable=function(t){if(this.pointables.push(t),this.pointablesMap[t.id]=t,(t.tool?this.tools:this.fingers).push(t),void 0!==t.handId&&this.handsMap.hasOwnProperty(t.handId)){var n=this.handsMap[t.handId];switch(n.pointables.push(t),(t.tool?n.tools:n.fingers).push(t),t.type){case 0:n.thumb=t;break;case 1:n.indexFinger=t;break;case 2:n.middleFinger=t;break;case 3:n.ringFinger=t;break;case 4:n.pinky=t}}},l.prototype.tool=function(t){var n=this.pointable(t);return n.tool?n:r.Invalid},l.prototype.pointable=function(t){return this.pointablesMap[t]||r.Invalid},l.prototype.finger=function(t){var n=this.pointable(t);return n.tool?r.Invalid:n},l.prototype.hand=function(t){return this.handsMap[t]||e.Invalid},l.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;var e=this.rotationMatrix(t),r=.5*(e[0]+e[4]+e[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==n){var o=this.rotationAxis(t);i*=s.dot(o,s.normalize(s.create(),n))}return i},l.prototype.rotationAxis=function(t){return this.valid&&t.valid?s.normalize(s.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):s.create()},l.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var n=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),t._rotation,n)},l.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},l.prototype.translation=function(t){return this.valid&&t.valid?s.subtract(s.create(),this._translation,t._translation):s.create()},l.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},l.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var n=0,e=this.hands.length;n!=e;n++)t+="  "+this.hands[n].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var r=0,i=this.pointables.length;r!=i;r++)t+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)t+="  "+this.gestures[o].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},l.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},hand:function(){return e.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{"./finger":7,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"gl-matrix":23,underscore:24}],9:[function(t,n,e){var r=t("gl-matrix"),i=r.vec3,o=t("events").EventEmitter,a=t("underscore"),s=(e.createGesture=function(t){var n;switch(t.type){case"circle":n=new u(t);break;case"swipe":n=new c(t);break;case"screenTap":n=new h(t);break;case"keyTap":n=new l(t);break;default:throw"unknown gesture type"}return n.id=t.id,n.handIds=t.handIds.slice(),n.pointableIds=t.pointableIds.slice(),n.duration=t.duration,n.state=t.state,n.type=t.type,n},e.gestureListener=function(t,n){var e={},r={};t.on("gesture",function(t,i){if(t.type==n){if(("start"==t.state||"stop"==t.state)&&void 0===r[t.id]){var o=new s(t,i);r[t.id]=o,a.each(e,function(t,n){o.on(n,t)})}r[t.id].update(t,i),"stop"==t.state&&delete r[t.id]}});var i={start:function(t){return e.start=t,i},stop:function(t){return e.stop=t,i},complete:function(t){return e.stop=t,i},update:function(t){return e.update=t,i}};return i},e.Gesture=function(t,n){this.gestures=[t],this.frames=[n]});s.prototype.update=function(t,n){this.lastGesture=t,this.lastFrame=n,this.gestures.push(t),this.frames.push(n),this.emit(t.state,this)},s.prototype.translation=function(){return i.subtract(i.create(),this.lastGesture.startPosition,this.lastGesture.position)},a.extend(s.prototype,o.prototype);var u=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};u.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var c=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};c.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var h=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};h.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var l=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};l.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:21,"gl-matrix":23,underscore:24}],10:[function(t,n){var e=t("./pointable"),r=t("./bone"),i=t("gl-matrix"),o=i.mat3,a=i.vec3,s=t("underscore"),u=n.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],this.arm=t.armBasis?new r(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis}):null,this.tools=[],this._translation=t.t,this._rotation=s.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition,this.type=t.type,this.grabStrength=t.grabStrength,this.pinchStrength=t.pinchStrength,this.confidence=t.confidence};u.prototype.finger=function(t){var n=this.frame.finger(t);return n&&n.handId==this.id?n:e.Invalid},u.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;var e=t.hand(this.id);if(!e.valid)return 0;var r=this.rotationMatrix(t),i=.5*(r[0]+r[4]+r[8]-1),o=Math.acos(i);if(o=isNaN(o)?0:o,void 0!==n){var s=this.rotationAxis(t);o*=a.dot(s,a.normalize(a.create(),n))}return o},u.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return a.create();var n=t.hand(this.id);return n.valid?a.normalize(a.create(),[this._rotation[7]-n._rotation[5],this._rotation[2]-n._rotation[6],this._rotation[3]-n._rotation[1]]):a.create()},u.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return o.create();var n=t.hand(this.id);if(!n.valid)return o.create();var e=o.transpose(o.create(),this._rotation),r=o.multiply(o.create(),n._rotation,e);return r},u.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var n=t.hand(this.id);return n.valid?Math.exp(this._scaleFactor-n._scaleFactor):1},u.prototype.translation=function(t){if(!this.valid||!t.valid)return a.create();var n=t.hand(this.id);return n.valid?[this._translation[0]-n._translation[0],this._translation[1]-n._translation[1],this._translation[2]-n._translation[2]]:a.create()},u.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},u.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},u.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},u.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},u.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return e.Invalid},finger:function(){return e.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return o.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":23,underscore:24}],11:[function(t,n){n.exports={Controller:t("./controller"),Frame:t("./frame"),Gesture:t("./gesture"),Hand:t("./hand"),Pointable:t("./pointable"),Finger:t("./finger"),InteractionBox:t("./interaction_box"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),JSONProtocol:t("./protocol").JSONProtocol,glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:void 0,version:t("./version.js"),_:t("underscore"),EventEmitter:t("events").EventEmitter,loop:function(t,n){return t&&void 0===n&&"[object Function]"==={}.toString.call(t)&&(n=t,t={}),this.loopController?t&&this.loopController.setupFrameEvents(t):this.loopController=new this.Controller(t),this.loopController.loop(n),this.loopController},plugin:function(t,n){this.Controller.plugin(t,n)}}},{"./circular_buffer":2,"./controller":5,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:21,"gl-matrix":23,underscore:24}],12:[function(t,n){var e=t("gl-matrix"),r=e.vec3,i=n.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};i.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},i.prototype.normalizePoint=function(t,n){var e=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return n&&(e[0]=Math.min(Math.max(e[0],0),1),e[1]=Math.min(Math.max(e[1],0),1),e[2]=Math.min(Math.max(e[2],0),1)),e},i.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},i.Invalid={valid:!1}},{"gl-matrix":23}],13:[function(t,n){var e=n.exports=function(t){this.steps=[],this.controller=t};e.prototype.addStep=function(t){this.steps.push(t)},e.prototype.run=function(t){for(var n=this.steps.length,e=0;e!=n&&t;e++)t=this.steps[e](t);return t},e.prototype.removeStep=function(t){var n=this.steps.indexOf(t);if(-1===n)throw"Step not found in pipeline";this.steps.splice(n,1)},e.prototype.addWrappedStep=function(t,n){var e=this.controller,r=function(r){var i,o,a;for(i="frame"==t?[r]:r[t+"s"]||[],o=0,a=i.length;a>o;o++)n.call(e,i[o]);return r};return this.addStep(r),r}},{}],14:[function(t,n){var e=t("gl-matrix"),r=(e.vec3,n.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible});r.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},r.prototype.hand=function(){return this.frame.hand(this.handId)},r.Invalid={valid:!1}},{"gl-matrix":23}],15:[function(t,n,e){var r=t("./frame"),i=(t("./hand"),t("./pointable"),t("./finger"),t("underscore")),o=t("events").EventEmitter,a=function(t){this.type=t.type,this.state=t.state};e.chooseProtocol=function(t){var n;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:n=s(t),n.sendBackground=function(t,e){t.send(n.encode({background:e}))},n.sendFocused=function(t,e){t.send(n.encode({focused:e}))},n.sendOptimizeHMD=function(t,e){t.send(n.encode({optimizeHMD:e}))};break;default:throw"unrecognized version"}return n};var s=e.JSONProtocol=function(t){var n=function(t){if(t.event)return new a(t.event);n.emit("beforeFrameCreated",t);var e=new r(t);return n.emit("afterFrameCreated",e,t),e};return n.encode=function(t){return JSON.stringify(t)},n.version=t.version,n.serviceVersion=t.serviceVersion,n.versionLong="Version "+t.version,n.type="protocol",i.extend(n,o.prototype),n}},{"./finger":7,"./frame":8,"./hand":10,"./pointable":14,events:21,underscore:24}],16:[function(t,n,e){e.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(t,n){n.exports=function(){return function(t){var n=t.pointables.sort(function(t,n){return t.z-n.z})[0];return n&&n.valid&&(t.cursorPosition=n.tipPosition),t}}},{}],18:[function(t,n){var e=t("events").EventEmitter,r=t("underscore"),i=n.exports=function(t,n){this.start=new Vector(t),this.end=new Vector(n),this.enteredFrame=null};i.prototype.hasPointables=function(t){for(var n=0;n!=t.pointables.length;n++){var e=t.pointables[n].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1},i.prototype.listener=function(t){var n=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return n.updatePosition(t)}},i.prototype.clipper=function(){var t=this;return function(n){return t.updatePosition(n),t.enteredFrame?n:null}},i.prototype.setupNearRegion=function(t){var n=this.nearRegion=new i([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),e=this;n.on("enter",function(t){e.emit("near",t)}),n.on("exit",function(t){e.emit("far",t)}),e.on("exit",function(t){e.emit("near",t)})},i.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},i.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},i.prototype.mapToXY=function(t,n,e){var r=this.normalize(t),i=r.x,o=r.y;return i>1?i=1:-1>i&&(i=-1),o>1?o=1:-1>o&&(o=-1),[(i+1)/2*n,(1-o)/2*e,r.z]},r.extend(i.prototype,e.prototype)},{events:21,underscore:24}],19:[function(t,n){n.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],20:[function(){},{}],21:[function(t,n,e){function r(t,n){if(t.indexOf)return t.indexOf(n);for(var e=0;e<t.length;e++)if(n===t[e])return e;return-1}var i=t("__browserify_process");i.EventEmitter||(i.EventEmitter=function(){});var o=e.EventEmitter=i.EventEmitter,a="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=10;o.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},o.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var n=this._events[t];if(!n)return!1;if("function"==typeof n){switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:var e=Array.prototype.slice.call(arguments,1);n.apply(this,e)}return!0}if(a(n)){for(var e=Array.prototype.slice.call(arguments,1),r=n.slice(),i=0,o=r.length;o>i;i++)r[i].apply(this,e);return!0}return!1},o.prototype.addListener=function(t,n){if("function"!=typeof n)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,n),this._events[t])if(a(this._events[t])){
if(!this._events[t].warned){var e;e=void 0!==this._events.maxListeners?this._events.maxListeners:s,e&&e>0&&this._events[t].length>e&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(n)}else this._events[t]=[this._events[t],n];else this._events[t]=n;return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,n){var e=this;return e.on(t,function r(){e.removeListener(t,r),n.apply(this,arguments)}),this},o.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var e=this._events[t];if(a(e)){var i=r(e,n);if(0>i)return this;e.splice(i,1),0==e.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},o.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},o.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},o.listenerCount=function(t,n){var e;return e=t._events&&t._events[n]?"function"==typeof t._events[n]?1:t._events[n].length:0}},{__browserify_process:22}],22:[function(t,n){var e=n.exports={};e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var e=[];return window.addEventListener("message",function(t){var n=t.source;if((n===window||null===n)&&"process-tick"===t.data&&(t.stopPropagation(),e.length>0)){var r=e.shift();r()}},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}},{}],23:[function(t,n,e){!function(t){"use strict";var n={};"undefined"==typeof e?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n.exports={},define(function(){return n.exports})):n.exports="undefined"!=typeof window?window:t:n.exports=e,function(t){if(!n)var n=1e-6;if(!e)var e="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var i={};i.setMatrixArrayType=function(t){e=t},"undefined"!=typeof t&&(t.glMatrix=i);var o=Math.PI/180;i.toRadian=function(t){return t*o};var a={};a.create=function(){var t=new e(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var n=new e(2);return n[0]=t[0],n[1]=t[1],n},a.fromValues=function(t,n){var r=new e(2);return r[0]=t,r[1]=n,r},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},a.set=function(t,n,e){return t[0]=n,t[1]=e,t},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t},a.sub=a.subtract,a.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t},a.mul=a.multiply,a.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t},a.div=a.divide,a.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},a.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},a.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},a.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},a.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)},a.dist=a.distance,a.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)},a.len=a.length,a.squaredLength=function(t){var n=t[0],e=t[1];return n*n+e*e},a.sqrLen=a.squaredLength,a.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},a.normalize=function(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t},a.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},a.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,n,e,r){var i=n[0],o=n[1];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t},a.random=function(t,n){n=n||1;var e=2*r()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},a.transformMat2=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i,t[1]=e[1]*r+e[3]*i,t},a.transformMat2d=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i+e[4],t[1]=e[1]*r+e[3]*i+e[5],t},a.transformMat3=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[3]*i+e[6],t[1]=e[1]*r+e[4]*i+e[7],t},a.transformMat4=function(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[4]*i+e[12],t[1]=e[1]*r+e[5]*i+e[13],t},a.forEach=function(){var t=a.create();return function(n,e,r,i,o,a){var s,u;for(e||(e=2),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],o(t,t,a),n[s]=t[0],n[s+1]=t[1];return n}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=a);var s={};s.create=function(){var t=new e(3);return t[0]=0,t[1]=0,t[2]=0,t},s.clone=function(t){var n=new e(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},s.fromValues=function(t,n,r){var i=new e(3);return i[0]=t,i[1]=n,i[2]=r,i},s.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},s.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},s.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},s.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t},s.sub=s.subtract,s.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t},s.mul=s.multiply,s.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t},s.div=s.divide,s.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},s.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},s.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},s.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},s.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(e*e+r*r+i*i)},s.dist=s.distance,s.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return e*e+r*r+i*i},s.sqrDist=s.squaredDistance,s.length=function(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)},s.len=s.length,s.squaredLength=function(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r},s.sqrLen=s.squaredLength,s.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},s.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=e*e+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t},s.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},s.cross=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},s.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t},s.random=function(t,n){n=n||1;var e=2*r()*Math.PI,i=2*r()-1,o=Math.sqrt(1-i*i)*n;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=i*n,t},s.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12],t[1]=e[1]*r+e[5]*i+e[9]*o+e[13],t[2]=e[2]*r+e[6]*i+e[10]*o+e[14],t},s.transformMat3=function(t,n,e){var r=n[0],i=n[1],o=n[2];return t[0]=r*e[0]+i*e[3]+o*e[6],t[1]=r*e[1]+i*e[4]+o*e[7],t[2]=r*e[2]+i*e[5]+o*e[8],t},s.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],h=c*r+s*o-u*i,l=c*i+u*r-a*o,f=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=h*c+p*-a+l*-u-f*-s,t[1]=l*c+p*-s+f*-a-h*-u,t[2]=f*c+p*-u+h*-s-l*-a,t},s.rotateX=function(t,n,e,r){var i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},s.rotateY=function(t,n,e,r){var i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},s.rotateZ=function(t,n,e,r){var i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},s.forEach=function(){var t=s.create();return function(n,e,r,i,o,a){var s,u;for(e||(e=3),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2];return n}}(),s.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=s);var u={};u.create=function(){var t=new e(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},u.clone=function(t){var n=new e(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},u.fromValues=function(t,n,r,i){var o=new e(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,o},u.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},u.set=function(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t},u.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},u.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t},u.sub=u.subtract,u.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t},u.mul=u.multiply,u.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t},u.div=u.divide,u.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},u.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},u.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},u.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},u.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+o*o)},u.dist=u.distance,u.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+i*i+o*o},u.sqrDist=u.squaredDistance,u.length=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)},u.len=u.length,u.squaredLength=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i},u.sqrLen=u.squaredLength,u.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},u.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a),t},u.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},u.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2],s=n[3];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t[3]=s+r*(e[3]-s),t},u.random=function(t,n){return n=n||1,t[0]=r(),t[1]=r(),t[2]=r(),t[3]=r(),u.normalize(t,t),u.scale(t,t,n),t},u.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12]*a,t[1]=e[1]*r+e[5]*i+e[9]*o+e[13]*a,t[2]=e[2]*r+e[6]*i+e[10]*o+e[14]*a,t[3]=e[3]*r+e[7]*i+e[11]*o+e[15]*a,t},u.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],h=c*r+s*o-u*i,l=c*i+u*r-a*o,f=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=h*c+p*-a+l*-u-f*-s,t[1]=l*c+p*-s+f*-a-h*-u,t[2]=f*c+p*-u+h*-s-l*-a,t},u.forEach=function(){var t=u.create();return function(n,e,r,i,o,a){var s,u;for(e||(e=4),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;u>s;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],t[3]=n[s+3],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2],n[s+3]=t[3];return n}}(),u.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=u);var c={};c.create=function(){var t=new e(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.clone=function(t){var n=new e(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},c.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},c.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=e*a,t):null},c.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},c.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},c.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*h,t[3]=i*c+a*h,t},c.mul=c.multiply,c.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},c.scale=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},c.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},c.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},"undefined"!=typeof t&&(t.mat2=c);var h={};h.create=function(){var t=new e(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.clone=function(t){var n=new e(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},h.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=e*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=e*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-e*s)*u,t):null},h.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},h.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1],l=e[2],f=e[3],p=e[4],d=e[5];return t[0]=r*c+o*h,t[1]=i*c+a*h,t[2]=r*l+o*f,t[3]=i*l+a*f,t[4]=r*p+o*d+s,t[5]=i*p+a*d+u,t},h.mul=h.multiply,h.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=Math.sin(e),h=Math.cos(e);return t[0]=r*h+o*c,t[1]=i*h+a*c,t[2]=r*-c+o*h,t[3]=i*-c+a*h,t[4]=s,t[5]=u,t},h.scale=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1];return t[0]=r*c,t[1]=i*c,t[2]=o*h,t[3]=a*h,t[4]=s,t[5]=u,t},h.translate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*h+s,t[5]=i*c+a*h+u,t},h.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=h);var l={};l.create=function(){var t=new e(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},l.clone=function(t){var n=new e(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},l.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},l.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=h*a-s*c,f=-h*o+s*u,p=c*o-a*u,d=e*l+r*f+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-h*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=f*d,t[4]=(h*e-i*u)*d,t[5]=(-s*e+i*o)*d,t[6]=p*d,t[7]=(-c*e+r*u)*d,t[8]=(a*e-r*o)*d,t):null},l.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8];return t[0]=a*h-s*c,t[1]=i*c-r*h,t[2]=r*s-i*a,t[3]=s*u-o*h,t[4]=e*h-i*u,t[5]=i*o-e*s,t[6]=o*c-a*u,t[7]=r*u-e*c,t[8]=e*a-r*o,t},l.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return n*(c*o-a*u)+e*(-c*i+a*s)+r*(u*i-o*s)},l.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=e[0],p=e[1],d=e[2],v=e[3],m=e[4],g=e[5],y=e[6],M=e[7],w=e[8];return t[0]=f*r+p*a+d*c,t[1]=f*i+p*s+d*h,t[2]=f*o+p*u+d*l,t[3]=v*r+m*a+g*c,t[4]=v*i+m*s+g*h,t[5]=v*o+m*u+g*l,t[6]=y*r+M*a+w*c,t[7]=y*i+M*s+w*h,t[8]=y*o+M*u+w*l,t},l.mul=l.multiply,l.translate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=e[0],p=e[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+p*a+c,t[7]=f*i+p*s+h,t[8]=f*o+p*u+l,t},l.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=Math.sin(e),p=Math.cos(e);return t[0]=p*r+f*a,t[1]=p*i+f*s,t[2]=p*o+f*u,t[3]=p*a-f*r,t[4]=p*s-f*i,t[5]=p*u-f*o,t[6]=c,t[7]=h,t[8]=l,t},l.scale=function(t,n,e){var r=e[0],i=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},l.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},l.fromQuat=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e+e,s=r+r,u=i+i,c=e*a,h=r*a,l=r*s,f=i*a,p=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return t[0]=1-l-d,t[3]=h-g,t[6]=f+m,t[1]=h+g,t[4]=1-c-d,t[7]=p-v,t[2]=f-m,t[5]=p+v,t[8]=1-c-l,t},l.normalFromMat4=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=n[9],f=n[10],p=n[11],d=n[12],v=n[13],m=n[14],g=n[15],y=e*s-r*a,M=e*u-i*a,w=e*c-o*a,b=r*u-i*s,x=r*c-o*s,_=i*c-o*u,q=h*v-l*d,F=h*m-f*d,E=h*g-p*d,A=l*m-f*v,P=l*g-p*v,S=f*g-p*m,k=y*S-M*P+w*A+b*E-x*F+_*q;return k?(k=1/k,t[0]=(s*S-u*P+c*A)*k,t[1]=(u*E-a*S-c*F)*k,t[2]=(a*P-s*E+c*q)*k,t[3]=(i*P-r*S-o*A)*k,t[4]=(e*S-i*E+o*F)*k,t[5]=(r*E-e*P-o*q)*k,t[6]=(v*_-m*x+g*b)*k,t[7]=(m*w-d*_-g*M)*k,t[8]=(d*x-v*w+g*y)*k,t):null},l.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=l);var f={};f.create=function(){var t=new e(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f.clone=function(t){var n=new e(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},f.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],o=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},f.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=n[9],f=n[10],p=n[11],d=n[12],v=n[13],m=n[14],g=n[15],y=e*s-r*a,M=e*u-i*a,w=e*c-o*a,b=r*u-i*s,x=r*c-o*s,_=i*c-o*u,q=h*v-l*d,F=h*m-f*d,E=h*g-p*d,A=l*m-f*v,P=l*g-p*v,S=f*g-p*m,k=y*S-M*P+w*A+b*E-x*F+_*q;return k?(k=1/k,t[0]=(s*S-u*P+c*A)*k,t[1]=(i*P-r*S-o*A)*k,t[2]=(v*_-m*x+g*b)*k,t[3]=(f*x-l*_-p*b)*k,t[4]=(u*E-a*S-c*F)*k,t[5]=(e*S-i*E+o*F)*k,t[6]=(m*w-d*_-g*M)*k,t[7]=(h*_-f*w+p*M)*k,t[8]=(a*P-s*E+c*q)*k,t[9]=(r*E-e*P-o*q)*k,t[10]=(d*x-v*w+g*y)*k,t[11]=(l*w-h*x-p*y)*k,t[12]=(s*F-a*A-u*q)*k,t[13]=(e*A-r*F+i*q)*k,t[14]=(v*M-d*b-m*y)*k,t[15]=(h*b-l*M+f*y)*k,t):null},f.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],h=n[8],l=n[9],f=n[10],p=n[11],d=n[12],v=n[13],m=n[14],g=n[15];return t[0]=s*(f*g-p*m)-l*(u*g-c*m)+v*(u*p-c*f),t[1]=-(r*(f*g-p*m)-l*(i*g-o*m)+v*(i*p-o*f)),t[2]=r*(u*g-c*m)-s*(i*g-o*m)+v*(i*c-o*u),t[3]=-(r*(u*p-c*f)-s*(i*p-o*f)+l*(i*c-o*u)),t[4]=-(a*(f*g-p*m)-h*(u*g-c*m)+d*(u*p-c*f)),t[5]=e*(f*g-p*m)-h*(i*g-o*m)+d*(i*p-o*f),t[6]=-(e*(u*g-c*m)-a*(i*g-o*m)+d*(i*c-o*u)),t[7]=e*(u*p-c*f)-a*(i*p-o*f)+h*(i*c-o*u),t[8]=a*(l*g-p*v)-h*(s*g-c*v)+d*(s*p-c*l),t[9]=-(e*(l*g-p*v)-h*(r*g-o*v)+d*(r*p-o*l)),t[10]=e*(s*g-c*v)-a*(r*g-o*v)+d*(r*c-o*s),t[11]=-(e*(s*p-c*l)-a*(r*p-o*l)+h*(r*c-o*s)),t[12]=-(a*(l*m-f*v)-h*(s*m-u*v)+d*(s*f-u*l)),t[13]=e*(l*m-f*v)-h*(r*m-i*v)+d*(r*f-i*l),t[14]=-(e*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=e*(s*f-u*l)-a*(r*f-i*l)+h*(r*u-i*s),t},f.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],m=t[15],g=n*a-e*o,y=n*s-r*o,M=n*u-i*o,w=e*s-r*a,b=e*u-i*a,x=r*u-i*s,_=c*d-h*p,q=c*v-l*p,F=c*m-f*p,E=h*v-l*d,A=h*m-f*d,P=l*m-f*v;return g*P-y*A+M*E+w*F-b*q+x*_},f.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=n[9],p=n[10],d=n[11],v=n[12],m=n[13],g=n[14],y=n[15],M=e[0],w=e[1],b=e[2],x=e[3];return t[0]=M*r+w*s+b*l+x*v,t[1]=M*i+w*u+b*f+x*m,t[2]=M*o+w*c+b*p+x*g,t[3]=M*a+w*h+b*d+x*y,M=e[4],w=e[5],b=e[6],x=e[7],t[4]=M*r+w*s+b*l+x*v,t[5]=M*i+w*u+b*f+x*m,t[6]=M*o+w*c+b*p+x*g,t[7]=M*a+w*h+b*d+x*y,M=e[8],w=e[9],b=e[10],x=e[11],t[8]=M*r+w*s+b*l+x*v,t[9]=M*i+w*u+b*f+x*m,t[10]=M*o+w*c+b*p+x*g,t[11]=M*a+w*h+b*d+x*y,M=e[12],w=e[13],b=e[14],x=e[15],t[12]=M*r+w*s+b*l+x*v,t[13]=M*i+w*u+b*f+x*m,t[14]=M*o+w*c+b*p+x*g,t[15]=M*a+w*h+b*d+x*y,t},f.mul=f.multiply,f.translate=function(t,n,e){var r,i,o,a,s,u,c,h,l,f,p,d,v=e[0],m=e[1],g=e[2];return n===t?(t[12]=n[0]*v+n[4]*m+n[8]*g+n[12],t[13]=n[1]*v+n[5]*m+n[9]*g+n[13],t[14]=n[2]*v+n[6]*m+n[10]*g+n[14],t[15]=n[3]*v+n[7]*m+n[11]*g+n[15]):(r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=n[9],p=n[10],d=n[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=h,t[8]=l,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+s*m+l*g+n[12],t[13]=i*v+u*m+f*g+n[13],t[14]=o*v+c*m+p*g+n[14],t[15]=a*v+h*m+d*g+n[15]),t},f.scale=function(t,n,e){var r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},f.rotate=function(t,e,r,i){var o,a,s,u,c,h,l,f,p,d,v,m,g,y,M,w,b,x,_,q,F,E,A,P,S=i[0],k=i[1],z=i[2],L=Math.sqrt(S*S+k*k+z*z);return Math.abs(L)<n?null:(L=1/L,S*=L,k*=L,z*=L,o=Math.sin(r),a=Math.cos(r),s=1-a,u=e[0],c=e[1],h=e[2],l=e[3],f=e[4],p=e[5],d=e[6],v=e[7],m=e[8],g=e[9],y=e[10],M=e[11],w=S*S*s+a,b=k*S*s+z*o,x=z*S*s-k*o,_=S*k*s-z*o,q=k*k*s+a,F=z*k*s+S*o,E=S*z*s+k*o,A=k*z*s-S*o,P=z*z*s+a,t[0]=u*w+f*b+m*x,t[1]=c*w+p*b+g*x,t[2]=h*w+d*b+y*x,t[3]=l*w+v*b+M*x,t[4]=u*_+f*q+m*F,t[5]=c*_+p*q+g*F,t[6]=h*_+d*q+y*F,t[7]=l*_+v*q+M*F,t[8]=u*E+f*A+m*P,t[9]=c*E+p*A+g*P,t[10]=h*E+d*A+y*P,t[11]=l*E+v*A+M*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},f.rotateX=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[4],a=n[5],s=n[6],u=n[7],c=n[8],h=n[9],l=n[10],f=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*r,t[5]=a*i+h*r,t[6]=s*i+l*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=h*i-a*r,t[10]=l*i-s*r,t[11]=f*i-u*r,t},f.rotateY=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[8],h=n[9],l=n[10],f=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*r,t[1]=a*i-h*r,t[2]=s*i-l*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+h*i,t[10]=s*r+l*i,t[11]=u*r+f*i,t},f.rotateZ=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],h=n[5],l=n[6],f=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*r,t[1]=a*i+h*r,t[2]=s*i+l*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=h*i-a*r,t[6]=l*i-s*r,t[7]=f*i-u*r,t},f.fromRotationTranslation=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=r+r,u=i+i,c=o+o,h=r*s,l=r*u,f=r*c,p=i*u,d=i*c,v=o*c,m=a*s,g=a*u,y=a*c;return t[0]=1-(p+v),t[1]=l+y,t[2]=f-g,t[3]=0,t[4]=l-y,t[5]=1-(h+v),t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-(h+p),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},f.fromQuat=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e+e,s=r+r,u=i+i,c=e*a,h=r*a,l=r*s,f=i*a,p=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return t[0]=1-l-d,t[1]=h+g,t[2]=f-m,t[3]=0,t[4]=h-g,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=f+m,t[9]=p-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f.frustum=function(t,n,e,r,i,o,a){var s=1/(e-n),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},f.perspective=function(t,n,e,r,i){var o=1/Math.tan(n/2),a=1/(r-i);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},f.ortho=function(t,n,e,r,i,o,a){var s=1/(n-e),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},f.lookAt=function(t,e,r,i){var o,a,s,u,c,h,l,p,d,v,m=e[0],g=e[1],y=e[2],M=i[0],w=i[1],b=i[2],x=r[0],_=r[1],q=r[2];return Math.abs(m-x)<n&&Math.abs(g-_)<n&&Math.abs(y-q)<n?f.identity(t):(l=m-x,p=g-_,d=y-q,v=1/Math.sqrt(l*l+p*p+d*d),l*=v,p*=v,d*=v,o=w*d-b*p,a=b*l-M*d,s=M*p-w*l,v=Math.sqrt(o*o+a*a+s*s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),u=p*s-d*a,c=d*o-l*s,h=l*a-p*o,v=Math.sqrt(u*u+c*c+h*h),v?(v=1/v,u*=v,c*=v,h*=v):(u=0,c=0,h=0),t[0]=o,t[1]=u,t[2]=l,t[3]=0,t[4]=a,t[5]=c,t[6]=p,t[7]=0,t[8]=s,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*m+a*g+s*y),t[13]=-(u*m+c*g+h*y),t[14]=-(l*m+p*g+d*y),t[15]=1,t)},f.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=f);var p={};p.create=function(){var t=new e(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.rotationTo=function(){var t=s.create(),n=s.fromValues(1,0,0),e=s.fromValues(0,1,0);return function(r,i,o){var a=s.dot(i,o);return-.999999>a?(s.cross(t,n,i),s.length(t)<1e-6&&s.cross(t,e,i),s.normalize(t,t),p.setAxisAngle(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(s.cross(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,p.normalize(r,r))}}(),p.setAxes=function(){var t=l.create();return function(n,e,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],p.normalize(n,p.fromMat3(n,t))}}(),p.clone=u.clone,p.fromValues=u.fromValues,p.copy=u.copy,p.set=u.set,p.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.setAxisAngle=function(t,n,e){e=.5*e;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t},p.add=u.add,p.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=r*h+a*s+i*c-o*u,t[1]=i*h+a*u+o*s-r*c,t[2]=o*h+a*c+r*u-i*s,t[3]=a*h-r*s-i*u-o*c,t},p.mul=p.multiply,p.scale=u.scale,p.rotateX=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},p.rotateY=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},p.rotateZ=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},p.calculateW=function(t,n){var e=n[0],r=n[1],i=n[2];return t[0]=e,t[1]=r,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-e*e-r*r-i*i)),t},p.dot=u.dot,p.lerp=u.lerp,p.slerp=function(t,n,e,r){var i,o,a,s,u,c=n[0],h=n[1],l=n[2],f=n[3],p=e[0],d=e[1],v=e[2],m=e[3];return o=c*p+h*d+l*v+f*m,0>o&&(o=-o,p=-p,d=-d,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*h+u*d,t[2]=s*l+u*v,t[3]=s*f+u*m,t},p.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-e*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},p.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},p.length=u.length,p.len=p.length,p.squaredLength=u.squaredLength,p.sqrLen=p.squaredLength,p.normalize=u.normalize,p.fromMat3=function(t,n){var e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[7]-n[5])*e,t[1]=(n[2]-n[6])*e,t[2]=(n[3]-n[1])*e;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;e=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*a+a]+1),t[i]=.5*e,e=.5/e,t[3]=(n[3*a+o]-n[3*o+a])*e,t[o]=(n[3*o+i]+n[3*i+o])*e,t[a]=(n[3*a+i]+n[3*i+a])*e}return t},p.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=p)}(n.exports)}(this)},{}],24:[function(t,n,e){(function(){var t=this,r=t._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,c=o.slice,h=o.concat,l=a.toString,f=a.hasOwnProperty,p=o.forEach,d=o.map,v=o.reduce,m=o.reduceRight,g=o.filter,y=o.every,M=o.some,w=o.indexOf,b=o.lastIndexOf,x=Array.isArray,_=Object.keys,q=s.bind,F=function(t){return t instanceof F?t:this instanceof F?void(this._wrapped=t):new F(t)};"undefined"!=typeof e?("undefined"!=typeof n&&n.exports&&(e=n.exports=F),e._=F):t._=F,F.VERSION="1.4.4";var E=F.each=F.forEach=function(t,n,e){if(null!=t)if(p&&t.forEach===p)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(n.call(e,t[r],r,t)===i)return}else for(var a in t)if(F.has(t,a)&&n.call(e,t[a],a,t)===i)return};F.map=F.collect=function(t,n,e){var r=[];return null==t?r:d&&t.map===d?t.map(n,e):(E(t,function(t,i,o){r[r.length]=n.call(e,t,i,o)}),r)};var A="Reduce of empty array with no initial value";F.reduce=F.foldl=F.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduce===v)return r&&(n=F.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(E(t,function(t,o,a){i?e=n.call(r,e,t,o,a):(e=t,i=!0)}),!i)throw new TypeError(A);return e},F.reduceRight=F.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(n=F.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var a=F.keys(t);o=a.length}if(E(t,function(s,u,c){u=a?a[--o]:--o,i?e=n.call(r,e,t[u],u,c):(e=t[u],i=!0)}),!i)throw new TypeError(A);return e},F.find=F.detect=function(t,n,e){var r;return P(t,function(t,i,o){return n.call(e,t,i,o)?(r=t,!0):void 0}),r},F.filter=F.select=function(t,n,e){var r=[];return null==t?r:g&&t.filter===g?t.filter(n,e):(E(t,function(t,i,o){n.call(e,t,i,o)&&(r[r.length]=t)}),r)},F.reject=function(t,n,e){return F.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},F.every=F.all=function(t,n,e){n||(n=F.identity);var r=!0;return null==t?r:y&&t.every===y?t.every(n,e):(E(t,function(t,o,a){return(r=r&&n.call(e,t,o,a))?void 0:i}),!!r)};var P=F.some=F.any=function(t,n,e){n||(n=F.identity);var r=!1;return null==t?r:M&&t.some===M?t.some(n,e):(E(t,function(t,o,a){return r||(r=n.call(e,t,o,a))?i:void 0;

}),!!r)};F.contains=F.include=function(t,n){return null==t?!1:w&&t.indexOf===w?-1!=t.indexOf(n):P(t,function(t){return t===n})},F.invoke=function(t,n){var e=c.call(arguments,2),r=F.isFunction(n);return F.map(t,function(t){return(r?n:t[n]).apply(t,e)})},F.pluck=function(t,n){return F.map(t,function(t){return t[n]})},F.where=function(t,n,e){return F.isEmpty(n)?e?null:[]:F[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},F.findWhere=function(t,n){return F.where(t,n,!0)},F.max=function(t,n,e){if(!n&&F.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!n&&F.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return E(t,function(t,i,o){var a=n?n.call(e,t,i,o):t;a>=r.computed&&(r={value:t,computed:a})}),r.value},F.min=function(t,n,e){if(!n&&F.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!n&&F.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return E(t,function(t,i,o){var a=n?n.call(e,t,i,o):t;a<r.computed&&(r={value:t,computed:a})}),r.value},F.shuffle=function(t){var n,e=0,r=[];return E(t,function(t){n=F.random(e++),r[e-1]=r[n],r[n]=t}),r};var S=function(t){return F.isFunction(t)?t:function(n){return n[t]}};F.sortBy=function(t,n,e){var r=S(n);return F.pluck(F.map(t,function(t,n,i){return{value:t,index:n,criteria:r.call(e,t,n,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index<n.index?-1:1}),"value")};var k=function(t,n,e,r){var i={},o=S(n||F.identity);return E(t,function(n,a){var s=o.call(e,n,a,t);r(i,s,n)}),i};F.groupBy=function(t,n,e){return k(t,n,e,function(t,n,e){(F.has(t,n)?t[n]:t[n]=[]).push(e)})},F.countBy=function(t,n,e){return k(t,n,e,function(t,n){F.has(t,n)||(t[n]=0),t[n]++})},F.sortedIndex=function(t,n,e,r){e=null==e?F.identity:S(e);for(var i=e.call(r,n),o=0,a=t.length;a>o;){var s=o+a>>>1;e.call(r,t[s])<i?o=s+1:a=s}return o},F.toArray=function(t){return t?F.isArray(t)?c.call(t):t.length===+t.length?F.map(t,F.identity):F.values(t):[]},F.size=function(t){return null==t?0:t.length===+t.length?t.length:F.keys(t).length},F.first=F.head=F.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:c.call(t,0,n)},F.initial=function(t,n,e){return c.call(t,0,t.length-(null==n||e?1:n))},F.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:c.call(t,Math.max(t.length-n,0))},F.rest=F.tail=F.drop=function(t,n,e){return c.call(t,null==n||e?1:n)},F.compact=function(t){return F.filter(t,F.identity)};var z=function(t,n,e){return E(t,function(t){F.isArray(t)?n?u.apply(e,t):z(t,n,e):e.push(t)}),e};F.flatten=function(t,n){return z(t,n,[])},F.without=function(t){return F.difference(t,c.call(arguments,1))},F.uniq=F.unique=function(t,n,e,r){F.isFunction(n)&&(r=e,e=n,n=!1);var i=e?F.map(t,e,r):t,o=[],a=[];return E(i,function(e,r){(n?r&&a[a.length-1]===e:F.contains(a,e))||(a.push(e),o.push(t[r]))}),o},F.union=function(){return F.uniq(h.apply(o,arguments))},F.intersection=function(t){var n=c.call(arguments,1);return F.filter(F.uniq(t),function(t){return F.every(n,function(n){return F.indexOf(n,t)>=0})})},F.difference=function(t){var n=h.apply(o,c.call(arguments,1));return F.filter(t,function(t){return!F.contains(n,t)})},F.zip=function(){for(var t=c.call(arguments),n=F.max(F.pluck(t,"length")),e=new Array(n),r=0;n>r;r++)e[r]=F.pluck(t,""+r);return e},F.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},F.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=F.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(w&&t.indexOf===w)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},F.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(b&&t.lastIndexOf===b)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},F.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=e;return o},F.bind=function(t,n){if(t.bind===q&&q)return q.apply(t,c.call(arguments,1));var e=c.call(arguments,2);return function(){return t.apply(n,e.concat(c.call(arguments)))}},F.partial=function(t){var n=c.call(arguments,1);return function(){return t.apply(this,n.concat(c.call(arguments)))}},F.bindAll=function(t){var n=c.call(arguments,1);return 0===n.length&&(n=F.functions(t)),E(n,function(n){t[n]=F.bind(t[n],t)}),t},F.memoize=function(t,n){var e={};return n||(n=F.identity),function(){var r=n.apply(this,arguments);return F.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},F.delay=function(t,n){var e=c.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},F.defer=function(t){return F.delay.apply(F,[t,1].concat(c.call(arguments,1)))},F.throttle=function(t,n){var e,r,i,o,a=0,s=function(){a=new Date,i=null,o=t.apply(e,r)};return function(){var u=new Date,c=n-(u-a);return e=this,r=arguments,0>=c?(clearTimeout(i),i=null,a=u,o=t.apply(e,r)):i||(i=setTimeout(s,c)),o}},F.debounce=function(t,n,e){var r,i;return function(){var o=this,a=arguments,s=function(){r=null,e||(i=t.apply(o,a))},u=e&&!r;return clearTimeout(r),r=setTimeout(s,n),u&&(i=t.apply(o,a)),i}},F.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},F.wrap=function(t,n){return function(){var e=[t];return u.apply(e,arguments),n.apply(this,e)}},F.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},F.after=function(t,n){return 0>=t?n():function(){return--t<1?n.apply(this,arguments):void 0}},F.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var e in t)F.has(t,e)&&(n[n.length]=e);return n},F.values=function(t){var n=[];for(var e in t)F.has(t,e)&&n.push(t[e]);return n},F.pairs=function(t){var n=[];for(var e in t)F.has(t,e)&&n.push([e,t[e]]);return n},F.invert=function(t){var n={};for(var e in t)F.has(t,e)&&(n[t[e]]=e);return n},F.functions=F.methods=function(t){var n=[];for(var e in t)F.isFunction(t[e])&&n.push(e);return n.sort()},F.extend=function(t){return E(c.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},F.pick=function(t){var n={},e=h.apply(o,c.call(arguments,1));return E(e,function(e){e in t&&(n[e]=t[e])}),n},F.omit=function(t){var n={},e=h.apply(o,c.call(arguments,1));for(var r in t)F.contains(e,r)||(n[r]=t[r]);return n},F.defaults=function(t){return E(c.call(arguments,1),function(n){if(n)for(var e in n)null==t[e]&&(t[e]=n[e])}),t},F.clone=function(t){return F.isObject(t)?F.isArray(t)?t.slice():F.extend({},t):t},F.tap=function(t,n){return n(t),t};var L=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof F&&(t=t._wrapped),n instanceof F&&(n=n._wrapped);var i=l.call(t);if(i!=l.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;e.push(t),r.push(n);var a=0,s=!0;if("[object Array]"==i){if(a=t.length,s=a==n.length)for(;a--&&(s=L(t[a],n[a],e,r)););}else{var u=t.constructor,c=n.constructor;if(u!==c&&!(F.isFunction(u)&&u instanceof u&&F.isFunction(c)&&c instanceof c))return!1;for(var h in t)if(F.has(t,h)&&(a++,!(s=F.has(n,h)&&L(t[h],n[h],e,r))))break;if(s){for(h in n)if(F.has(n,h)&&!a--)break;s=!a}}return e.pop(),r.pop(),s};F.isEqual=function(t,n){return L(t,n,[],[])},F.isEmpty=function(t){if(null==t)return!0;if(F.isArray(t)||F.isString(t))return 0===t.length;for(var n in t)if(F.has(t,n))return!1;return!0},F.isElement=function(t){return!(!t||1!==t.nodeType)},F.isArray=x||function(t){return"[object Array]"==l.call(t)},F.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){F["is"+t]=function(n){return l.call(n)=="[object "+t+"]"}}),F.isArguments(arguments)||(F.isArguments=function(t){return!(!t||!F.has(t,"callee"))}),"function"!=typeof/./&&(F.isFunction=function(t){return"function"==typeof t}),F.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},F.isNaN=function(t){return F.isNumber(t)&&t!=+t},F.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},F.isNull=function(t){return null===t},F.isUndefined=function(t){return void 0===t},F.has=function(t,n){return f.call(t,n)},F.noConflict=function(){return t._=r,this},F.identity=function(t){return t},F.times=function(t,n,e){for(var r=Array(t),i=0;t>i;i++)r[i]=n.call(e,i);return r},F.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=F.invert(I.escape);var j={escape:new RegExp("["+F.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+F.keys(I.unescape).join("|")+")","g")};F.each(["escape","unescape"],function(t){F[t]=function(n){return null==n?"":(""+n).replace(j[t],function(n){return I[t][n]})}}),F.result=function(t,n){if(null==t)return null;var e=t[n];return F.isFunction(e)?e.call(t):e},F.mixin=function(t){E(F.functions(t),function(n){var e=F[n]=t[n];F.prototype[n]=function(){var t=[this._wrapped];return u.apply(t,arguments),B.call(this,e.apply(F,t))}})};var D=0;F.uniqueId=function(t){var n=++D+"";return t?t+n:n},F.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","   ":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g;F.template=function(t,n,e){var r;e=F.defaults({},e,F.templateSettings);var i=new RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,s){return a+=t.slice(o,s).replace(C,function(t){return"\\"+O[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+n.length,n}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(n)return r(n,F);var u=function(t){return r.call(this,t,F)};return u.source="function("+(e.variable||"obj")+"){\n"+a+"}",u},F.chain=function(t){return F(t).chain()};var B=function(t){return this._chain?F(t).chain():t};F.mixin(F),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=o[t];F.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],B.call(this,e)}}),E(["concat","join","slice"],function(t){var n=o[t];F.prototype[t]=function(){return B.call(this,n.apply(this._wrapped,arguments))}}),F.extend(F.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],25:[function(t){"undefined"!=typeof window&&"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}),Leap=t("../lib/index")},{"../lib/index":11}]},{},[25]);
//# sourceMappingURL=libs.core.min.js.map